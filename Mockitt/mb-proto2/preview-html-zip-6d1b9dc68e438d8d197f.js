(()=>{var Vt={95046:(D,y,e)=>{"use strict";e.d(y,{L:()=>m});var i=e(27264),p=e(67832);const m=async(M,o,P)=>{const E=(0,i.Z7)(M),t=(0,p.Ph)(E),_="/flpak/w-paknewft?"+new URLSearchParams({upperType:"project-basic",type:"proto2",teamCid:o,treLen:String(t.byteLength),treRawLen:String(E.length)}),s=await fetch(_,{method:"POST",body:t,headers:{"mb-client-opt":encodeURIComponent(JSON.stringify(P))}});if(!s.ok)throw Object.assign(new Error("failed to create new flpak: "+_),{status:s.status});return s.json()}},71789:(D,y,e)=>{"use strict";e.d(y,{Qs:()=>s,vn:()=>a,Ev:()=>d});var i=e(81165),p=e(53705),m=e(92029),M=e(3153);const o="hzv5",P="init",E="flpk",t=(l,w)=>l.slice(-3)+"/"+l+"/"+w+".zip",_=()=>globalThis[o],s=()=>(0,p.i3)(_()),n=()=>(0,m.hK)(_(),"missing HZV5 data"),a=async()=>(n(),_()[P]),d=async l=>{if(n(),(0,M.cQ)(l))throw new Error("no cmt data");const[w,f,R,C]=_()[E],se={t10s:w[0],size:w[1],tre:(0,i.J)(w[2])},ae=f.map(fe=>{let[Ee,W,K]=fe;return{t10s:Ee,size:W,pbx:(0,i.J)(K)}}),de=R.map(fe=>{let[Ee,W]=fe;return{t10s:Ee,pch:W}});return[se,ae,de,new Date(C)]}},79486:(D,y,e)=>{"use strict";e.d(y,{Bs:()=>ie,Q0:()=>Me,VL:()=>Y,hD:()=>vt,jr:()=>Et,om:()=>Z,q8:()=>nt,yS:()=>Ke});var i=e(87587),p=e(27264),m=e(21940),M=e(12155),o=e(38246),P=e(66421),E=e(51784),t=e(29815),_=e(95046),s=e(71789),n=e(9756),a=e(53233),d=e(78467),l=e(27056),w=e(7221),f=e(38133),R=e(85689),C=e(79857),se=e(43980),ae=e(59729),de=e(45294),fe=e(53092),Ee=e(3118),W=e(33406),K=e(99276),H=e(81801),O=e(18104),T=e(9736),r=e(86351);ENV.IS_SKT_HTTP&&(0,m.lQ)(!0),(0,C.dp)(se.uT,se.n_);const u=(G,V)=>async ue=>{try{const{fssDat:ge}=ue;console.warn("[afterSocketJoin]",ge);const te=await ge.loadSOS();if(!te)return;console.warn("[afterSocketJoin] found unsaved proj tree",te);const Pe=await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+(0,fe.Fy)(new Date(te.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D",cancelText:"\u53D6\u6D88",theme:V});if((0,C.QB)("loadSOS",void 0,{isKeep:!!Pe,time:te.time}),Pe){const{clientData:{upperCid:Re}}=await(0,_.L)(te.tree,G.team_cid,{...G,name:G.name+"-\u6062\u590D\u6570\u636E"});await ge.freeSOS(),(0,ae.ll)("/proto/design/"+Re)}else await ge.freeSOS()}catch(ge){console.warn("[afterSocketJoin]",ge)}},g=async(G,V)=>{console.warn("[onTransferError]",G,V),G==="Tot"||G==="5XX"?MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1}):G==="4XX"&&(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>MB.global.onBackButtonClick()))},I=async(G,V)=>{console.warn("[onReadOnlyError]",G,V),G==="Dat"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},Y=()=>{var G;return window.navigator.onLine&&(typeof rootSdk>"u"||((G=rootSdk)==null?void 0:G.flatSocket.getIsConnected()))},Z=async G=>{let{project_meta_cid:V,userId:ue}=G;return(0,m.od)({userId:ue,flpakKey:V,isDummyCmt:!0,isAllowDat:!0,onTransferError:g,onReadOnlyError:I})},Me=async G=>{const{sdkStore:V}=await(0,m.Qb)({flpakKey:G});return V},pe=G=>{let{cssCur:V,emitCur:ue}=G,ge={locKey:"",curX:NaN,curY:NaN};document.addEventListener("pointermove",(0,i.P2)(()=>{try{if(V.getSocketStat().length<=1)return;const te=(0,de.U)();if(!te)return;const{current:{currentScreen:Pe},screencontainer:{cursorPos:Re}}=te,ke=Pe&&(Pe.cid||Pe.key);if(!ke||!Re)return;const{x:Ze,y:ze}=Re;if(ge.locKey===ke&&ge.curX===Ze&&ge.curY===ze)return;ue(ke,Ze,ze),ge={locKey:ke,curX:Ze,curY:ze}}catch(te){console.error("TODO: cssCur push error",te)}},.05*1e3,!0),{passive:!0})},Ce=(0,i.P2)(()=>{var G,V;(G=MB)==null||(V=G.__store__)==null||V.dispatch({type:"entry:rebuild:screen-widget-tree"})},.5*1e3),ve=(0,i.P2)(()=>{var G,V,ue,ge,te;!((G=MB)==null||(V=G.__store__)==null)&&V.dispatch&&MB.__store__.dispatch({type:"entry:comment:rebuild:commentList"}),!((ue=MB)==null||(ge=ue.webpackInterface)==null||(te=ge.store)==null)&&te.dispatch&&MB.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"})},.5*1e3),oe={repaint:G=>{let{type:V,payload:ue}=G;V===o.K&&ve()}},Be={repaint:G=>{let{type:V,payload:ue}=G;V===M.K&&Ce()}},Fe=(G,V)=>{if(G.getFlatTree().get("B@main").sub.length===0){const ue=(0,n.wc)([],V);G.applyDiff(ue),G.resetUndo()}else if(!G.getFlatTree().get("B@ref-mind")){const ue=[];ue.push({type:W.P6,key:Ee.T3,keySup:p.$3}),ue.push({type:W.q$,key:Ee.T3,attrDiff:(0,n.oE)("rbRefMind")}),G.applyDiff(ue),G.resetUndo()}},Ie=async(G,V)=>{try{const te=await(0,m.od)(G),Pe=te.sdkStore.createRoSdkStore();Object.assign(globalThis,{...te,rootSdk:te,roSdkStore:Pe}),(0,f.s_)()||pe(te),te.sdkStore.subscribe(Be.repaint),te.cmtStore.subscribe(oe.repaint),V&&(0,f.mK)()&&Fe(te.flatStore,V)}catch(te){var ue,ge;const Pe=te?Number(te.status)||Number((ue=te.toString().split("status")[1])==null||(ge=ue.split(":")[1])==null?void 0:ge.split(",")[0])||401:void 0;console.warn("[initRootSdk]",te,Pe),await(0,d.mB)({status:Pe})}},Ke=async G=>{let{projectBasicCid:V,theme:ue}=G;const{projectBasic:ge,projectMetaList:te}=await(0,a.zf)(V),[Pe]=te;{const{userId:Re,flatKey:ke}=await(0,a.tr)({projectBasicCid:V});console.log("[p2edit] uId="+Re+" key="+ke+" pbCid="+V),await Ie({userId:Re,flpakKey:ke,afterSocketJoin:u(ge,ue),onTransferError:g,onReadOnlyError:I,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0},ge)}return Object.assign(globalThis,{genMind:K.L,genFlow:H.z,genTable:O.Q,genChart:T.m,genPage:r.w}),{projectBasic:ge,projectMeta:Pe}},nt=async G=>{let{projectBasicCid:V,project_basic:ue,project_meta:ge,accessToken:te,password:Pe}=G;const Re=ue,ke=ge;{const{userId:Ze,flatKey:ze}=await(0,a.MT)({projectBasicCid:V,accessToken:te,password:Pe});console.log("[p2edit] uId="+Ze+" key="+ze+" pbCid="+V);const tt=!!Ze,Dt=tt&&!(0,f.s_)();await Ie({userId:Ze,flpakKey:ze,onTransferError:g,onReadOnlyError:I,isAllowDat:tt?"RO":!1,isAllowCmt:tt,isAllowCur:Dt,token:te,passwd:Pe},Re)}return{projectBasic:Re,projectMeta:ke}},yt=async()=>{const G=createFlatStore(createInitialFlatTree(),createClockStore({})),V=createSdkStore(G),ue=createShowMeTheTree(G),ge=createShowMeHotTree(V);Object.assign(globalThis,{flatStore:G,sdkStore:V,showMeTheTree:ue,showMeHotTree:ge});const te=initMockBasicData(V);if(G.applyDiff(te),DevUrlOptions.getIsPlayAxure())buildAxureData(V);else{switch(DevUrlOptions.getTestData()){case"td1":testDataSet.buildTestData1(te);break;case"td2":testDataSet.buildTestData2(te);break;case"td3":testDataSet.buildTestData3(te);break;case"td4":testDataSet.buildTestData4(te);break;default:testDataSet.buildTestData1(te);break}G.applyDiff(te)}G.resetUndo()},ie=async G=>{let{projectBasicCid:V,project_basic:ue,project_meta:ge,accessToken:te,password:Pe,projectVersion:Re}=G;const ke=ue,Ze=ge;{const{userId:ze,flatKey:tt}=await(0,l.tr)({prj2VersionCid:Re,projectCid:V});console.log("[p2edit] uId="+ze+" key="+tt+" pbCid="+V),await Ie({userId:ze,flpakKey:tt,onTransferError:g,onReadOnlyError:I,isAllowDat:!0,isAllowCmt:!1,isAllowCur:!1,token:te,passwd:Pe},ke)}return{projectBasic:ke,projectMeta:Ze}},Ot=async G=>{let{project_meta:V}=G;return await Ie({userId:void 0,flpakKey:V.cid,onTransferError:g,onReadOnlyError:I,isDummyCmt:!0},void 0),{projectMeta:V}},Et=async G=>{let{project_basic:V,project_meta:ue}=G;const ge=V,te=ue;return await Ie({userId:void 0,flpakKey:ue.cid,onTransferError:g,onReadOnlyError:I,isDummyCmt:!0,__fetchFlpakAsync:s.Ev},ge),{projectBasic:ge,projectMeta:te}},vt=async G=>{let{projectBasicCid:V}=G;const{market_template:ue,project_metas:ge}=await(0,w.Mv)(V),te=ge[0];return await Ie({userId:void 0,flpakKey:te.cid,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,onTransferError:g,onReadOnlyError:I},ue),{projectBasic:ue,projectMeta:te}}},74223:(D,y,e)=>{"use strict";e.d(y,{I2:()=>o,MI:()=>P,f1:()=>M});var i=e(1074),p=e.n(i),m=e(70423);const M=(E,t)=>{if(!(E!=null&&E.cid))return-1;let _=0,s="",n=E;for(;n&&!n.root_project&&(_=_+1,s=n.parent_cid,!!s);)n=t.get(s);return _};function o(E){return E&&Object.entries(E).reduce((t,_)=>{let[s,n]=_;return Object.assign(t,{[p()(s)]:n})},{})}const P=(E,t,_)=>{const s=(0,m.Rv)()?"_self":t;return window.open(E,s,_)}},41768:(D,y,e)=>{"use strict";e.d(y,{$$:()=>K,AX:()=>W,D6:()=>R,ER:()=>Ee,Eb:()=>a,Fv:()=>fe,GX:()=>g,I:()=>T,I3:()=>C,Lc:()=>Me,Oc:()=>t,Py:()=>s,Q2:()=>_,RT:()=>m,Sf:()=>Z,YE:()=>M,_:()=>l,_D:()=>o,ad:()=>se,an:()=>r,d$:()=>w,eF:()=>d,h8:()=>Y,hA:()=>u,jr:()=>f,kj:()=>n,p4:()=>I,vL:()=>de,yM:()=>O,zt:()=>ae});var i=e(67894);const p={iphone:0,android:1,ipad:2,web:3,apple_watch:4,smart_car:5,customize:6},m=Object.entries(i).map(pe=>{let[Ce,ve]=pe;return{device:Ce,modalList:Object.entries(ve).map(oe=>{let[Be,{name:Fe,width:Ie,height:Ke,hide:nt}]=oe;return{name:Fe,width:Ie,height:Ke,hide:nt,key:Be}})}}).sort((pe,Ce)=>p[pe.device]-p[Ce.device]),M=Object.entries(i).reduce((pe,Ce)=>{let[ve,oe]=Ce;return Object.assign(pe,Object.entries(oe).reduce((Be,Fe)=>{let[Ie,{name:Ke,width:nt,height:yt,hide:ie}]=Fe;return Object.assign(Be,{[Ie]:{name:Ke,width:nt,height:yt,device:ve,hide:ie}})},{Android:{name:"Android",width:360,height:640,device:"android"}}))},{}),o=["iphone_12_pro_max","iphone_12_pro","iphone_se"],E=Object.entries(i).map(pe=>{let[Ce,ve]=pe;return{device:Ce,modelList:Object.entries(ve).map(oe=>{let[Be,{name:Fe}]=oe;return{name:Fe,key:Be}})}}).filter(pe=>["ipad","iphone","android"].includes(pe.device)).reduce((pe,Ce)=>[...pe,...Ce.modelList],[]).map(pe=>pe.key),t=pe=>E.includes(pe);let _=function(pe){return pe.LIGHT="light",pe.DARK="dark",pe}({});const s="dark",n={grid_size:10,theme:_.LIGHT},a="#ffffff",d={h:20,v:10},l={row:{count:0,gutter:20,size:144},col:{count:4,gutter:20,size:0}},w="rgba(41, 141, 248, 0.24)",f="screen-history-onLeave-project",R=!!Number(sessionStorage.getItem("inClowdz")),C={light:"rgba(245, 245, 245, 1)",dark:"rgba(21, 21, 21, 1)"},se={[_.LIGHT]:4126537215,[_.DARK]:353703423},ae=[4,8,16,32,64,100,120,150,200,300,400,500,600,800,1e3,1600,3200,4e3],de=ae[0],fe=ae[ae.length-1],Ee=18,W=144,K=98,H=380,O=36,T=250,r=240,u=42,g=250,I=240,Y=184,Z=48,Me=(pe,Ce)=>{const ve=Ce==null?void 0:Ce.fill;return!ve||!(ve!=null&&ve.fillIsVisible)?se[pe||_.LIGHT]:ve.solidColor}},68951:(D,y,e)=>{"use strict";e.d(y,{O:()=>p});var i=e(26844);let p=function(m){return m[m.USER_COMBO=i._H.USER_COMBO]="USER_COMBO",m[m.ORG_COMBO=i._H.ORG_COMBO]="ORG_COMBO",m[m.PROJECT_MAIN=i._H.PROJECT_MAIN]="PROJECT_MAIN",m[m.PROJECT_TRASHCAN=i._H.PROJECT_TRASHCAN]="PROJECT_TRASHCAN",m[m.PROJECT_TEMPLATE=i._H.PROJECT_TEMPLATE]="PROJECT_TEMPLATE",m[m.PANEL_TEMPLATE=i._H.PANEL_TEMPLATE]="PANEL_TEMPLATE",m}({})},4091:(D,y,e)=>{"use strict";e.d(y,{S3:()=>p,kC:()=>o,ky:()=>M,mp:()=>P,pX:()=>i});const i="/proto",p=t=>i+"/"+t,m=t=>{const _=/^\/proto\/design\/(?:([^/]+?))$/i.exec(t);return _?_[1]:new Error("project cid error")},M=t=>{let{search:_,pathname:s}=t;return s.includes("/sharing")?s.includes("dashboard")||s.includes("htmlzip")?s.split("/").at(-3):s.includes("embed/v2")?location.pathname.split("/").at(-4):s.split("/").at(-2):new URLSearchParams(_).get("token")||/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(s)[1]},o="/p2mkt_view",P=t=>o+"/"+t,E=t=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(t)[1]},62609:(D,y,e)=>{"use strict";e.d(y,{K:()=>p,N:()=>m});var i=e(25926);const p=function(M,o,P){const E=o.getGuidesData()||"[]",t=new Set(JSON.parse(E)),_=new Set;return{checkGuideHasShown:s=>t.has(s),checkGuideToBeShown:s=>_.has(s),getState:()=>({commonGuidesHasShown:Array.from(t),commonGuidesToBeShown:Array.from(_)}),tryToShowGuide:s=>{var n,a;if(t.has(s)||!((n=MB)!=null&&(a=n.user)!=null&&a.id))return;const d=document.getElementById("MD_"+s);if(d){d.style.display="block";return}_.add(s),(0,i.k)(s,M,P)},markGuideAsRead:s=>{t.add(s),o.setGuidesData(JSON.stringify(Array.from(t)))},batchMarkGuideAsRead:s=>{s.forEach(n=>t.add(n)),o.setGuidesData(JSON.stringify(Array.from(t)))},closeGuide:s=>{const n=document.getElementById("MD_"+s);n&&n.parentNode&&n.parentNode.removeChild(n)},closeAllGuide:()=>{const s=document.getElementById("GUIDES");s&&s.parentNode&&s.parentNode.removeChild(s)},removeGuide:s=>{t.delete(s),o.setGuidesData(JSON.stringify(Array.from(t)))}}},m=M=>{let{store:o,api:P,commonGuidesData:E,isDesign:t,isPreview:_}=M;MB.commonGuideHelper=p(o,{getGuidesData:()=>E,setGuidesData:P.updateUserCommonGuidesData},{isDesign:t,isPreview:_})}},10737:(D,y,e)=>{"use strict";e.d(y,{Z:()=>E});var i=e(89870),p=e(77646),m=e(77200),M=e(10542);const o=t=>t.container.artboards.isShowSplash,P=(0,p.P1)([m.CL,m.vo,m.gz,o,m.GP,m.yT,m.Uq,m.EB],(t,_,s,n,a,d,l,w)=>{let{activePageKey:f,activeCanvasKey:R}=l;return{screen:t,project:_,isImmersive:s,isShowSplash:n,previewOptions:a,isPanelPreviewMode:d,activePageKey:f,activeCanvasKey:R,isPreviewCombo:w}}),E=(0,i.$j)(t=>P(t))(M.Z)},54635:(D,y,e)=>{"use strict";e.d(y,{$5:()=>C,LL:()=>m,Q7:()=>K,Uo:()=>_,Z7:()=>w,_F:()=>s,aF:()=>H,dD:()=>n,hi:()=>de,m:()=>l,ty:()=>ae});var i=e(30733);function p(O,T){if(!O||O.length!==T.length)return!1;for(let r=0,u=O.length;r<u;r++)if(O[r]!==T[r])return!1;return!0}function m(O){let T,r;return function(){return p(r,arguments)||(T=O.apply(null,arguments),r=arguments),T}}const M=["https://qiniu.modao.cc","https://qiniu-us.modao.cc","https://qiniu-test.modao.cc"],o=O=>M.some(T=>O.startsWith(T)),P={"&amp;":"&","&lt;":"<","&gt;":">"},E=/(&amp;|&lt;|&gt;)/g,t=O=>P[O]||O,_=O=>O&&O.replace(E,t),s=function(O,T,r){return O===void 0&&(O=0),T===void 0&&(T=1),r===void 0&&(r=0),Number(parseFloat((1/T*O).toFixed(2)))+r},n=O=>{let{image:T,adjust:r}=O;const u=T.naturalWidth,g=T.naturalHeight;u>=g?T.style.maxWidth=r+"px":T.style.maxHeight=r+"px"},a=/\s|<|>|《|》|:|：|？|\?|\\|\/|"|”|\||\./g,d=O=>O&&O.replace(a,"_"),l=O=>{let{url:T,name:r,type:u}=O;const g=document.createElement("a"),I=d(r)||"\u672A\u547D\u540D";if(o(T)){const Z=""+encodeURIComponent(I);g.href=T+"?attname="+Z+"."+u}else{const Z=I;g.setAttribute("download",Z),g.href=""+T}g.click()},w=O=>Number(O.toFixed(2)),f=O=>new Promise(T=>setTimeout(T,O)),R=()=>console.error("\u4E0B\u8F7D\u5931\u8D25"),C=()=>{try{const O=(0,i.GQ)("user_pick_color");return JSON.parse(O||"[]")}catch(O){return[]}},se=O=>{const T=C();return T.includes(O)?{history:T,focusColor:O}:(T.unshift(O),T.length>40&&T.pop(),localStorageSetItem("user_pick_color",JSON.stringify(T)),{history:T,focusColor:null})},ae=O=>{const T=C(),r=T.indexOf(O);return T.splice(r,1),(0,i.A6)("user_pick_color",JSON.stringify(T)),T},de=()=>{let O;try{O=(window.parent===window?!0:/^\/app\/(design|preview)/.test(window.parent.location.pathname))&&(MB.isDashboard||!MB.f.inSharing&&window.location.protocol!=="file:")}catch(T){console.warn(T),O=!1}return O},fe=O=>{let T=1/0,r=1/0,u=-1/0,g=-1/0;for(const Y of O)isFinite(Y.top)&&isFinite(Y.left)&&isFinite(Y.width)&&isFinite(Y.height)&&(T=Math.min(T,Y.left),u=Math.max(u,Y.left+Y.width),r=Math.min(r,Y.top),g=Math.max(g,Y.top+Y.height));return{minX:T,minY:r,maxX:u,maxY:g}},W=(()=>{const O=new Map;return(T,r,u)=>{const g=T+"-"+r;if(O.get(g))return O.get(g);{const I=fe(u);return O.set(g,I),I}}})(),K=function(O){var T,r,u,g;O===void 0&&(O=!0);const I=!1,Y=!1;return O?!!((T=MB)!=null&&(r=T.user)!=null&&r.id)||I||Y:!!((u=MB)!=null&&(g=u.user)!=null&&g.id)||I},H=function(O,T){T===void 0&&(T=!0),K(T)||MB.global.popupHelper.loginAsync({onConfirm:()=>{setTimeout(()=>location.reload(),50)},type:"signin",source:O})}},59729:(D,y,e)=>{"use strict";e.d(y,{_5:()=>M,gn:()=>E,ll:()=>P});var i=e(74223);const p="jsid",m=()=>{try{const _=new URLSearchParams(location.search).get(p);_?window.localStorage.setItem(p,_):window.localStorage.removeItem(p)}catch(t){window.localStorage.removeItem(p)}},M=function(t){t===void 0&&(t=!1);try{if(ENV.IS_ON_PREMISES||ENV.IS_WONDER_SHARE)return"";const _=window.localStorage.getItem(p);return _?t?"&jsid="+_:"?jsid="+_:""}catch(_){return""}};function o(t){const _=/^[^?#]+\?([^#]+)/.test(t),s=M(_),n=s&&(t==null?void 0:t.includes(s==null?void 0:s.slice(1)));return""+t+(n?"":s)}const P=t=>{const _=o(t);location.href=_},E=(t,_,s)=>{const n=o(t);(0,i.MI)(n,_,s)}},14730:(D,y,e)=>{"use strict";e.d(y,{T_:()=>_,Tj:()=>a,ce:()=>w,qH:()=>n,tX:()=>s,vb:()=>l});var i=e(18582),p=e(20209),m=e(13228),M=e(59234),o=e(11685),P=e(52048);const E=Object.fromEntries(i.map(C=>[C.family,C.typeList.map(se=>(0,p.a7)(se,0))])),t=Object.fromEntries(i.map(C=>[C.family,["normal",...C.typeList.find(se=>se.toLowerCase().includes("italic"))?["italic"]:[]]])),_=()=>{const C=(0,m.e)(),se=$(C).find(".ah");let ae=12;for(let de=12;de>=1;de--)se.css("font-size",de+"px"),se.css("line-height","100%"),se.text("a").height()===de&&(ae=de);return ae},s=C=>C.type===o.l.WRichText?{width:(0,M.bZ)(C),height:(0,M.xz)(C)}:{width:C.width,height:C.height},n=C=>C.type===o.l.WRichText?d(C):C.height,a=C=>C.type===o.l.WRichText?w(C):C.height,d=C=>{if(C.type!==o.l.WRichText)return null;const ae=(0,m.e)().getElementsByClassName("auto-width")[0];ae.classList.add(C.richTextV1.fontDirection),ae.style.height=C.height+"px",ae.innerHTML=(0,P.gh)(C);const de=ae.getBoundingClientRect();return ae.classList.remove(C.richTextV1.fontDirection),Math.ceil(de.width)},l=C=>{if(C.type!==o.l.WRichText)return null;const ae=(0,m.e)().getElementsByClassName("auto-height")[0];ae.classList.add(C.richTextV1.fontDirection),ae.style.width=C.width+"px",ae.innerHTML=(0,P.gh)(C);const de=ae.getBoundingClientRect();return ae.classList.remove(C.richTextV1.fontDirection),Math.ceil(de.height)},w=C=>{if(C.type!==o.l.WRichText)return null;const se=MB.__store__.getState().common.scale,ae=document.getElementById("test-design-dom"+C.cid),de=(0,P.y1)(C.cid);let fe;return ae?fe=ae.getBoundingClientRect().height:fe=de.getBoundingClientRect().height,Math.ceil(fe/(se/100))},f=(C,se)=>{const ae={...C[0],children:void 0},de={...C[0].children[0],text:void 0};return se.map(fe=>({...ae,children:[{...de,text:fe}]}))},R=C=>{const se=new Set;return C.text.forEach(ae=>{ae.children.forEach(de=>{var fe,Ee;let W=getFontWeightNumDependOnBoldType(de.fontWeight,de.boldType);W=(fe=E[de.fontFamily])!=null&&fe.includes(W)?W:400;const K=(Ee=t[de.fontFamily])!=null&&Ee.includes(de.fontStyle)?de.fontStyle:"normal",H=de.fontFamily+"|"+K+"|"+W;se.add(H)})}),se}},38625:(D,y,e)=>{"use strict";e.d(y,{CQ:()=>m,Gn:()=>p,ne:()=>M});var i=e(54635);const p=P=>{},m=P=>{},M=P=>{const E=(0,i.Q7)()},o=(P,E,t)=>{}},49345:(D,y,e)=>{"use strict";e.d(y,{G1:()=>M,Sr:()=>p,ms:()=>o});var i=e(25797);const p=P=>(0,i.Gf)("/api/payment/v4/coupon/workspace_guide_2203_coupon",{space_type:P}),m=()=>fetchGetJSON("/api/web/v3/initial"),M=P=>(0,i.Gf)("/api/web/v3/account/workspace_guide_days",{org_cid:P}),o=()=>(0,i.EE)("/api/dashboard/v4/orgs/list")},53233:(D,y,e)=>{"use strict";e.d(y,{BG:()=>se,IS:()=>xt,KQ:()=>I,MT:()=>Ut,W:()=>Ce,kk:()=>gt,sE:()=>ft,tr:()=>xe,zf:()=>de});var i=e(76333),p=e(27056),m=e(7221),M=e(73669),o=e(25797),P=e(44766),E=e(68557),t=e(35517),_=e(22686),s=e(43980),n=e(79486);const a=(c,h)=>{const S=new Error("[NO SENTRY] "+c);return Object.assign(S,h),S},d=c=>(0,o.EE)("/api/upper/web_v1/design/initial?project_cid="+c),l=(c,h)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+c+"&password="+h),w=async(c,h)=>{const S="/api/flat/web_v1/preview/initial?access_token="+c+"&view_mode="+h,x=await fetch(S,{credentials:"same-origin"}),Q=await x.json();if(x.status!==200)throw a("[fetchGetHead] failed with "+x.status+": "+S,{status:x.status,error_type:Q==null?void 0:Q.error_type});return Q},f=()=>(0,o.EE)("/api/web/v3/guide/guide_data"),R=c=>(0,o._Z)("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:c}}),C=c=>(0,o._Z)("/api/web/v3/guide/workspace_guides_2203",{guide:{workspace_guides_2203:c}}),se=(c,h)=>(0,o.IP)("/api/upper/web_v1/basics/"+c,{...h}),ae=(c,h)=>(0,o.IP)("/api/flat/web_v1/fcg/"+c,{...h}),de=async c=>{const{project_basic:h,project_metas:S}=await(0,o.EE)("/api/upper/web_v1/basics/"+c);return{projectBasic:h,projectMetaList:S}},fe=async c=>{const{library_accesses:h}=await(0,o.EE)("/api/library/v3/orgs/"+c+"/library_accesses");return{libraryAccesses:h}},Ee=async c=>{const{members:h}=await(0,o.EE)("/api/dashboard/v5/orgs/"+c+"/members");return h},W=()=>(0,o.EE)("/api/web/v3/configuration/design_activity"),K=()=>(0,o.EE)("/api/web/v3/configuration/square_topic"),H=()=>(0,o.EE)("/api/web/v3/configuration/workspace"),O=async()=>{let c=[];try{const h=await(0,o.EE)("/api/web/v3/configuration/square_search_keywords");h!=null&&h.keywords&&(c=h==null?void 0:h.keywords.split(/[,，]/))}catch(h){await(0,t.Vz)(h)}return c},T=async()=>{let c=[];try{const h=await(0,o.EE)("/api/library/v4/recent_keywords");h!=null&&h.keywords&&(c=h==null?void 0:h.keywords)}catch(h){await(0,t.Vz)(h)}return c},r=()=>(0,o._E)("/api/library/v4/recent_keywords"),u=c=>(0,o.Mn)("/api/library/v4/recent_keywords",{keyword:c}),g=async()=>{let c=null;try{const h=await(0,o.EE)("/api/library/v4/workspace_labels");h!=null&&h.keywords&&(c=h==null?void 0:h.keywords)}catch(h){await(0,t.Vz)(h)}return c},I=async()=>{var c;let h;try{h=await(0,o.EE)("/api/library/v3/project_upper/user_combo_groups")}catch(S){return await(0,t.Vz)(S),{}}return{userComboGroupList:(c=h)==null?void 0:c.user_combo_groups}},Y=async c=>{let h;try{h=await(0,o.bX)("/api/library/v4/users/combo_groups/"+c.cid,{...c})}catch(S){return await(0,t.Vz)(S),{}}return h},Z=c=>(0,o.IP)("/api/proto7/web_v1/screen_aligns/"+c.cid,{...c}),Me=c=>(0,o._E)("/api/library/v3/project_upper/user_combo_groups/"+c),pe=c=>Y(c),Ce=async c=>{var h;let{orgCid:S}=c,x;try{x=await(0,o.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+S)}catch(Q){return await(0,t.Vz)(Q),{}}return{orgComboGroupList:(h=x)==null?void 0:h.org_combo_groups}},ve=async(c,h)=>{let S;try{S=await(0,o.bX)("/api/library/v4/orgs/combo_groups/"+c.cid+"?org_cid="+h,{...c})}catch(x){return await(0,t.Vz)(x),{}}return S},oe=c=>(0,o._E)("/api/library/v3/project_upper/org_combo_groups/"+c),Be=async c=>{const{org_combo_group:h}=await(0,o.IP)("/api/library/v3/project_upper/org_combo_groups/"+c.cid,{...c});return{org_combo_group:h}},Fe=async(c,h,S)=>{let{upperCid:x,projectMetaCid:Q}=h,{nextUpperCid:_e,nextProjectMetaCid:we}=S;try{await(0,o.Gf)("/project-buffer/prototype/check-transfer/screen-glue?upperCid="+x,{projectMetaCid:Q,screenGlueCidList:c,nextUpperCid:_e,nextProjectMetaCid:we})}catch(Ae){await(0,t.Vz)(Ae)}},Ie=async c=>{let{orgComboGroupCid:h}=c,S;try{S=await(0,o.EE)("/api/library/v3/project_upper/org_combo_groups/"+h)}catch(Se){return await(0,t.Vz)(Se),{}}const{project_meta:x,screen_glues:Q,screen_metas:_e,screen_aligns:we}=S,Ae=[x],Te=await(0,P.L9)({projectMetaList:Ae,screenMetaList:_e});return{projectMeta:x,screenGlueList:Q,screenMetaList:_e,projectScreenObjectList:Te,screenAligns:we}},Ke=async c=>{let{userComboGroupCid:h}=c,S;try{S=await(0,o.EE)("/api/library/v3/project_upper/user_combo_groups/"+h)}catch(Se){return await(0,t.Vz)(Se),{}}const{project_meta:x,screen_glues:Q,screen_metas:_e,screen_aligns:we}=S,Ae=[x],Te=await(0,P.L9)({projectMetaList:Ae,screenMetaList:_e});return{projectMeta:x,screenGlueList:Q,screenMetaList:_e,projectScreenObjectList:Te,screenAligns:we}},nt=async c=>{let{userLocale:h,projectBasicCid:S}=c;try{return await(0,n.yS)({projectBasicCid:S})}catch(x){MB.global.popupHelper.alertAsync({desc:I18N.dModule.project_load_failed,isHTML:!0,confirmText:I18N.dModule.confirm}).then(()=>{MB.global.onBackButtonClick()}),(0,s.uT)("\u9879\u76EE\u6253\u4E0D\u5F00"),console.error(x)}},yt=async c=>{const{project_metas:h,screen_metas:S,screen_glues:x,market_template:Q,icon_group:_e}=await(0,m.Mv)(c),{category:we}=Q,Ae=we===_.yr;if(we===_.Jc){const{title:Se,source:Oe}=_e,Ue=await(0,o.EE)(Oe),rt=E.em[Se]||"svg",{iconGroupData:lt,iconData:dt}=(0,E._7)(Ue,rt);return{marketTemplate:Q,iconGroupData:lt,iconData:dt}}else{const Se=[];if(Ae){const Oe={};S.forEach(Ue=>{Oe[Ue.screen_glue_cid]=Ue.cid});for(const Ue of x){const{cid:rt,name:lt,project_meta_cid:dt}=Ue;Se.push({cid:rt,name:lt,type:Q.category,projectBasicCid:Q.cid,projectMetaCid:dt,screenGlue:Ue,screenMetaCid:Oe[Ue.cid]||""})}}else{const Oe=x.find(Ue=>Ue.type==="project-main");for(const Ue of S){const{cid:rt,name:lt,project_meta_cid:dt,screen_glue_cid:rr}=Ue;Oe.cid===rr&&Se.push({cid:rt,name:lt,type:Q.category,projectBasicCid:Q.cid,projectMetaCid:dt,screenGlue:Oe,screenMetaCid:rt})}}return{marketTemplate:Q,marketTemplateItemList:Se,projectMetaList:h,screenGlueList:x,screenMetaList:S}}},ie=async()=>{const c=await(0,m.Wk)(_.yr),h=await(0,m.Wk)(_.Jc),S=await(0,m.Wk)(_.md),x=c.concat(h).concat(S),Q=x.filter(Te=>{let{category:Se}=Te;return[_.yr,_.md].includes(Se)}),_e=x.filter(Te=>{let{category:Se}=Te;return Se===_.Jc}),we=new Map,Ae=new Map;for(const Te of x){const{category:Se,cid:Oe}=Te;Se===_.Jc?Ae.set(Oe,Te):we.set(Oe,Te)}return{marketTemplateList:Q,iconLibraryList:_e,marketTemplateListMap:we,iconLibraryListMap:Ae}},Ot=c=>{let{marketTemplateCid:h}=c;return(0,o._E)("/api/community/v1/market_template/use/"+h)},Et=async c=>{let{projectMetaList:h,screenGlueList:S,screenMetaList:x}=c;const Q=await(0,P.L9)({projectMetaList:h,screenMetaList:x});return{marketTemplateDataMap:V(h,S,x,Q)}},vt=()=>(0,o.EE)("/api/community/v1/icon_group/builtin_icon_group"),G=async c=>{const{icon_group:{title:h,source:S},market_template:x}=await(0,m.Mv)(c.cid),Q=await(0,o.EE)(S),_e=E.em[h]||"svg",{iconGroupData:we,iconData:Ae}=(0,E._7)(Q,_e);return{iconGroupData:we,iconData:Ae,marketTemplate:x}},V=(c,h,S,x)=>{const Q={};for(const _e of c)Q[_e.cid]={projectMeta:_e,screenGlueList:[],screenMetaList:[],projectScreenObjectList:[]};for(const _e of h)Q[_e.project_meta_cid].screenGlueList.push(_e);for(const _e of S)Q[_e.project_meta_cid].screenMetaList.push(_e);for(const _e of Object.values(Q))if(_e.screenMetaList.length)for(const we of _e.screenMetaList){const Ae=x.find(Te=>Te.cid===we.cid);Ae&&_e.projectScreenObjectList.push(Ae)}return Q},ue=()=>Date.now(),ge=(c,h,S,x)=>(0,o.kt)("/node-history-statistics/new_history",{action:c,project_cid:h,team_cid:S,org_cid:x,time:ue()}),te=c=>{let{projectCid:h,teamCid:S,orgCid:x}=c;ge(0,h,S,x)};let Pe=null;const Re=c=>{let{projectCid:h,teamCid:S,orgCid:x}=c;Pe&&ue()-Pe<60*5*1e3||(Pe=ue(),ge(1,h,S,x))},ke=async()=>{try{const{asset_groups:c}=await(0,o.sE)("/api/library/v3/asset_data/me/asset_groups");return{userAssetGroupList:c}}catch(c){await(0,t.Vz)(c)}},Ze=async c=>{let{orgCid:h}=c;try{const{asset_groups:S}=await(0,o.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+h);return{orgAssetGroupList:S}}catch(S){await(0,t.Vz)(S)}},ze=async c=>{try{const{asset:h,user_asset:S}=await(0,o.NS)("/api/library/v3/asset_data/me/search_by_url",{image_url:c});return{asset:h,user_asset:S}}catch(h){await(0,t.Vz)(h)}},tt=async(c,h)=>{try{const{asset:S,org_asset:x}=await(0,o.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:c,org_cid:h});return{asset:S,org_asset:x}}catch(S){await(0,t.Vz)(S)}},Dt=async c=>{try{const{user_asset_group:h}=await(0,o.bX)("/api/library/v4/users/asset_groups/"+c.cid,{...c});return{user_asset_group:h}}catch(h){await(0,t.Vz)(h)}},Jt=async c=>{try{const{org_asset_group:h}=await(0,o.bX)("/api/library/v4/orgs/asset_groups/"+c.cid,{...c});return{org_asset_group:h}}catch(h){await(0,t.Vz)(h)}},qt=async c=>{try{return await(0,o.bX)("/api/library/v3/asset_data/me/assets/"+c.asset_cid,{...c})}catch(h){await(0,t.Vz)(h)}},$t=async c=>{try{return await(0,o.bX)("/api/library/v3/orgs/assets/"+c.cid+"?org_cid="+c.org_cid,{...c})}catch(h){await(0,t.Vz)(h)}},Yt=async c=>{let{cid:h,name:S,groupCid:x}=c;try{await(0,o.NS)("/api/library/v3/asset_data/me/assets",{cid:h,name:S,group_cid:x})}catch(Q){await(0,t.Vz)(Q)}},St=async c=>{let{orgCid:h,cid:S,name:x,groupCid:Q}=c;try{const _e=await(0,o.NS)("/api/library/v3/orgs/assets",{cid:S,org_cid:h,name:x,group_cid:Q});return _e==null?void 0:_e.cid}catch(_e){await(0,t.Vz)(_e)}},Lt=async c=>{let{user_asset_group_cid:h,org_cid:S,org_asset_group_cid:x}=c;try{return(0,o.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:h,org_cid:S,org_asset_group_cid:x})}catch(Q){await(0,t.Vz)(Q)}},bt=async c=>{let{orgCid:h="me",keyword:S,type:x="all"}=c;const{assets:Q,combos:_e,asset_groups:we,combo_groups:Ae,related_asset_groups:Te,related_combo_groups:Se}=await(0,o.EE)("/api/library/v3/asset_data/search?org_cid="+h+"&keyword="+S+"&type="+x);return{assets:Q.map(Oe=>({cid:Oe.asset_cid,...Oe})),combos:_e,assetGroups:we,comboGroups:Ae,relatedAssetGroups:Te,relatedComboGroups:Se}},Xt=async c=>{try{const{user_asset_group:h,user_assets:S}=await(0,o.sE)("/api/library/v3/asset_data/me/asset_groups/"+c);return{user_asset_group:h,userAssets:S}}catch(h){await(0,t.Vz)(h)}},Qt=async c=>{try{const{org_asset_group:h,org_assets:S}=await(0,o.sE)("/api/library/v3/orgs/asset_groups/"+c);return{org_asset_group:h,orgAssets:S}}catch(h){await(0,t.Vz)(h)}},It=async c=>{await(0,o._E)("/api/library/v3/asset_data/me/assets/"+c)},er=async c=>{await(0,o._E)("/api/library/v3/orgs/assets/"+c.cid+"?org_cid="+c.org_cid)},he=async c=>{await(0,o._E)("/api/library/v3/asset_data/me/asset_groups/"+c)},Bt=async c=>{await(0,o._E)("/api/library/v3/orgs/asset_groups/"+c)},ce=c=>(0,o.EE)("/update_web_version?next_web_version="+c),pt=c=>(0,o._Z)("/preferences/update",{...c}),Rt=(c,h)=>(0,o.bX)("/api/library/v4/users/combo_groups/"+c,{...h}),ut=c=>(h,S)=>{const x={...S,org_cid:c};return(0,o.bX)("/api/library/v4/orgs/combo_groups/"+h,{...x})},je=async(c,h)=>{try{return await(0,o.bX)("/api/library/v4/users/asset_groups/"+c,{...h})}catch(S){await(0,t.Vz)(S)}},kt=c=>async(h,S)=>{try{const x={...S,org_cid:c};return await(0,o.bX)("/api/library/v4/orgs/asset_groups/"+h,{...x})}catch(x){await(0,t.Vz)(x)}},_t=async(c,h)=>{let S=null;try{const x=await(0,o.sE)("/api/community/v1/workspace?category="+c+"&plabel="+h);x!=null&&x.market_templates&&(S=x==null?void 0:x.market_templates)}catch(x){await(0,t.Vz)(x)}return S},mt=async c=>{let h=null;try{const S=await(0,o.EE)("/flpak/w-p2wsearch?"+c);S!=null&&S.data&&(h=S)}catch(S){await(0,t.Vz)(S)}return h},Pt=async c=>{let h=null;try{const S=await(0,o.EE)("/flpak/w-p2meta/"+c);S!=null&&S.length&&(h=S)}catch(S){await(0,t.Vz)(S)}return h},ft=async c=>{let{currentComboPanel:h,projectMetaCid:S}=c;try{await(0,o.Gf)("/flpak/w-migrate-"+h+"-combo-group/"+S+"?mode=normal")}catch(x){await(0,t.Vz)(x)}},xe=async c=>{let{projectBasicCid:h}=c;try{const{userId:S,flatKey:x}=await(0,o.EE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+h);return{userId:S,flatKey:x}}catch(S){await(0,t.Vz)(S)}},Ut=async c=>{let{projectBasicCid:h,accessToken:S,password:x}=c;try{const{userId:Q,flatKey:_e}=await(0,o.EE)("/api/flat/web_v1/proj2-preview-info?prj2Cid="+h+"&access_token="+S+"&password="+x);return{userId:Q,flatKey:_e}}catch(Q){await(0,t.Vz)(Q)}},xt=c=>(0,o.EE)("/api/dashboard/v5/orgs/"+c),gt=async c=>{const{project:h}=await(0,o.EE)("/api/dashboard/v5/projects/"+c);return h};var tr={requestProjectFullData:nt,requestUserComboGroupList:I,requestOrgComboGroupList:Ce,requestCreateUserComboGroup:Y,requestCreateOrgComboGroup:ve,requestDeleteUserComboGroup:Me,requestUpdateUserComboGroup:pe,requestDeleteOrgComboGroup:oe,requestUpdateOrgComboGroup:Be,requestProjectTransferScreenGlue:Fe,requestUserComboGroupDataFromCid:Ke,requestOrgComboGroupDataFromCid:Ie,requestSketchArtboardList:i.cH,requestSketchArtboardById:i.LD,requestSliceByArtboardId:i.s,requestSliceZipByArtboardId:i.LT,requestUserCommonGuidesData:f,updateUserCommonGuidesData:R,updateUser2203GuidesData:C,checkSharingPermission:i.b9,fetchProjectComment:i.Jk,fetchProjectScreenCommentThreadCountMap:i.bN,requestMarketTemplateDataForLibrary:ie,requestMarketTemplateDataFromCid:yt,requestMarketTemplateItemListDataForLibrary:Et,requestMarketTemplateItemUnused:Ot,fetchCreateCommentThread:i.Q6,fetchCreateComment:i.C6,fetchDeleteCommentThread:i.bz,fetchDeleteComment:i.sv,updateProjectBasicsInfo:se,updateComboProjectBasicsInfo:ae,getProjectAllVersions:p.Bl,postCreateNewVersion:p.nG,putUpdateVersionInfo:p.dp,postCheckoutVersion:p.UJ,getProjectOnlineCollaborators:p.go,deleteVersion:p.h_,requestProjectShare:M.o7,updateCurrentProjectShare:M.Of,getAllSharings:M.UC,trackViewProject:te,trackEditProject:Re,requestUserAssetGroupList:ke,requestOrgAssetGroupList:Ze,requestMeAssetDataBySearchUrl:ze,requestOrgAssetDataBySearchUrl:tt,requestUpdateUserAssetGroup:Dt,requestUpdateOrgAssetGroup:Jt,requestUpdateUserAsset:qt,requestUpdateOrgAsset:$t,requestDeleteUserAsset:It,requestDeleteOrgAsset:er,requestDeleteUserAssetGroup:he,requestDeleteOrgAssetGroup:Bt,requestCreateOrgAsset:St,requestCreateUserAsset:Yt,requestUserAssetGroupToOrgAssetGroup:Lt,requestLibrarySearchData:bt,requestOrgMembers:Ee,requestAllLibraryAccess:fe,requestDesignInitialData:d,requestBuiltinIconGroup:vt,collectProjectMetaDataMap:V,requestConfigurationData:W,requestConfigurationSquareTopicData:K,requestWorkspaceConfiguration:H,requestConfigurationHotKeyWords:O,requestRecentKeywords:T,requestDeleteRecentKeywords:r,requestAddRecentKeywords:u,requestConfigurationWorkspaceLabels:g,requestUpdateRecentImportResources:m.Im,requestUserAssetsDataFromCid:Xt,requestOrgAssetsDataFromCid:Qt,requestUserStarredList:m.Wk,requestUserUsedResources:m.jj,requestStarredResources:m.kU,requestUnStarredResources:m.ZW,requestResourcesDetailData:m.Mv,requestRecentResourcesList:m.pS,requestHotIcons:m.w3,requestResourceHisotry:m.D4,requestResourcesListForSource:m.AY,requestIconGroupIconDataForCid:G,requestResourcesListByCategory:m._l,requestUpdateScreenAlign:Z,requestUpdateWebVersion:ce,requestUpdatePreference:pt,requestSortUserAssetGroup:je,requestSortOrgAssetGroup:kt,requestSortUserComboGroup:Rt,requestSortOrgComboGroup:ut,requestFindMarketTemplates:_t,requestSearchResourcesData:mt,requestResourcesDetails:Pt}},76333:(D,y,e)=>{"use strict";e.d(y,{C6:()=>fe,Jk:()=>se,LD:()=>w,LT:()=>R,Q6:()=>de,b9:()=>C,bN:()=>ae,bz:()=>Ee,cH:()=>l,s:()=>f,sv:()=>W});var i=e(44766),p=e(25797),m=e(73669),M=e(46295);const o=r=>{let{isVersions:u}=r;return{requestPreviewSetting:s,requestPreviewInitialData:t,requestPreviewEmbedInitial:a,requestProjectFullDataByAccessToken:d,requestSketchArtboardList:l,requestSketchArtboardById:w,requestSliceByArtboardId:f,requestSliceZipByArtboardId:R,checkSharingPermission:C,fetchProjectComment:se,fetchProjectScreenCommentThreadCountMap:ae,requestProjectShare:u?requestProjectShareVersion:requestProjectSharePreview,requestUserCommonGuidesData:P,updateUserCommonGuidesData:E,fetchCreateCommentThread:de,fetchCreateComment:fe,fetchDeleteCommentThread:Ee,fetchDeleteComment:W,updateProjectBasicsInfo:K,updateComboProjectBasicsInfo:H,requestPreviewInitialData4ReadOnlyV2:_}},P=()=>fetchGetJSON("/api/web/v3/guide/guide_data"),E=r=>fetchPutHead("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:r}}),t=async r=>{let{projectAccessToken:u,projectEncryptedPassword:g}=r;const I=g?"&password="+g:"";return(0,p.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+u+I)},_=async r=>{let{projectAccessToken:u,view_mode:g}=r;return fetchGetJSON("/api/flat/web_v1/preview/initial?access_token="+u+"&view_mode="+g)},s=r=>{let{projectAccessToken:u,password:g}=r;return(0,p.EE)("/api/upper/web_v1/preview/setting?access_token="+u+"&password="+(g||""))},n=r=>{let{projectAccessToken:u,password:g}=r;return(0,p.EE)("/api/flat/web_v1/preview/setting?access_token="+u+"&password="+(g||""))},a=r=>{let{projectAccessToken:u}=r;return(0,p.EE)("/api/upper/web_v1/preview/embed_initial?access_token="+u)},d=async r=>{let{projectAccessToken:u,projectEncryptedPassword:g,userLocale:I,projectVersion:Y}=r;const Z=await(0,i.lA)({projectBasicAccessToken:u,projectBasicEncryptedPassword:g,userLocale:I,projectVersion:Y});if(!Z)return;const{projectMetaList:[Me],screenGlueList:pe,screenMetaList:Ce,projectScreenObjectList:ve,projectBasic:oe,screenAlignList:Be}=Z;return{projectMeta:Me,screenGlueList:pe,screenMetaList:Ce,projectScreenObjectList:ve,projectBasic:oe,screenAlignList:Be}},l=r=>(0,p.EE)("/api/upper/web_v1/artboards?project_cid="+r),w=r=>(0,p.EE)("/api/upper/web_v1/artboards/layers?artboard_id="+r),f=r=>(0,p.EE)("/api/upper/web_v1/artboards/slices_json?artboard_id="+r),R=r=>{let{artboardId:u,encryptedPassword:g}=r;return(0,p.EE)("/api/upper/web_v1/artboards/slices_zip?artboard_id="+u+"&encrypted_password="+g)},C=async r=>{try{const{result:u}=await(0,p.EE)("/api/accesses/v4/project/"+r+"/permission_check?permission=P:update");return u}catch(u){return!1}},se=r=>{let{projectCid:u,projectEncryptedPassword:g,accessToken:I}=r;return(0,p.EE)("/api/proto7/web_v1/comments?project_cid="+u+"&password="+(g||"")+"&access_token="+I)},ae=r=>{let{projectAccessToken:u,projectEncryptedPassword:g}=r;return(0,p.EE)("/api/upper/web_v1/preview/"+u+"/screen_comments_thread_count_map?encrypted_password="+(g||""))},de=r=>(0,p._Z)("/api/proto7/web_v1/commentthreads/"+r.cid,{...r}),fe=r=>(0,p._Z)("/api/proto7/web_v1/comments/"+r.cid,{...r}),Ee=r=>(0,p.Bh)("/api/proto7/web_v1/commentthreads/"+r),W=r=>(0,p.Bh)("/api/proto7/web_v1/comments/"+r),K=(r,u)=>fetchPutJSON("/api/upper/web_v1/basics/"+r,{...u}),H=(r,u)=>fetchPutJSON("/api/flat/web_v1/fcg/"+r,{...u}),O=(r,u)=>fetchGetJSON("/api/upper/web_v1/basics/auth/"+r+"?password="+u);var T={requestPreviewSetting:s,requestPreviewSettingV2:n,requestPreviewInitialData:t,requestProjectFullDataByAccessToken:d,requestSketchArtboardList:l,requestSketchArtboardById:w,requestSliceByArtboardId:f,requestSliceZipByArtboardId:R,checkSharingPermission:C,requestPreviewEmbedInitial:a,fetchProjectComment:se,fetchProjectScreenCommentThreadCountMap:ae,requestProjectShare:m.o7,fetchCreateCommentThread:de,fetchCreateComment:fe,fetchDeleteCommentThread:Ee,fetchDeleteComment:W}},46295:(D,y,e)=>{"use strict";const i={access_token:"",comment_permission:"",device_model:"",highlight:!0,password:"",project_cid:"",screen_visible_switch:!1,screen_visible_list:[],shell_type:"device",simulator_type:"device",sticky:!0,view_access:"private",view_count:0,view_prd:!1,wechat:!1},p=async()=>({projectShareMock:i})},32380:(D,y,e)=>{"use strict";e.d(y,{H:()=>o,m:()=>M});var i=e(25797),p=e(69930),m=e(65155);const M=function(P){var E;P===void 0&&(P="");const{isExperience:t,isLoggedExperience:_}=(E=MB.global)==null?void 0:E.designOptions;if(P==="isSave"){if(t)return MB.global.popupHelper.loginAsync({onConfirm:o}),!0;if(_){const s=MB.getRootProject&&MB.getRootProject();return MB.global.popupHelper.teamSelectModalAsync({projectCid:s==null?void 0:s.cid,onConfirm:n=>p.R.api.experienceTriggerAllSaveAfterLogin(n)}),!0}else return!1}else return t?(MB.global.popupHelper.loginAsync({onConfirm:o}),!0):!1},o=async()=>{if((0,m._$)()){window.top.location.reload();return}const{user:P}=await(0,i.EE)("/api/web/v3/initial");(0,i._Z)("/api/web/v3/guide/complete_workspace_guide"),MB.user=P,Object.assign(MB.global.designOptions,{isExperience:!1,isLoggedExperience:!0}),MB.action("update:design:options",{designOptions:{...MB.global.designOptions}}),MB.action("current:update:state",{currentUser:P});const E=MB.getRootProject&&MB.getRootProject();MB.global.popupHelper.teamSelectModalAsync({projectCid:E==null?void 0:E.cid,onConfirm:t=>p.R.api.experienceTriggerAllSaveAfterLogin(t)})}},59217:(D,y,e)=>{"use strict";e.d(y,{t:()=>P});var i=e(70103),p=e(24978),m=e(37665),M=e(25573),o=e(24455);const P=E=>{const t=(0,p.gk)(),_=(0,i.MT)(m.Z,(0,i.md)(t.middleware));return t.setEntryMap(M.T),E.getSelectedTrees=()=>(0,o.nAE)(_.getState()),E.getSelectedMindNodeTrees=()=>(0,o.TAc)(_.getState()),E.__store__=_,E.action=(s,n)=>_.dispatch({type:s,payload:n}),E.getScale=()=>(0,o.yZr)(_.getState()),E.getNextWidgetZ=()=>(0,o.YTF)(_.getState()),E.getCurrentProjectMeta=()=>(0,o.e4v)(_.getState()),E.getCurrentScreen=()=>(0,o.CL6)(_.getState()),E.getCurrentDesignOptions=()=>(0,o.DTi)(_.getState()),E.getRootProject=()=>(0,o.OnT)(_.getState()),E.getScreenDataMap=()=>(0,o.giy)(_.getState()),E.getSelectionItems=()=>(0,o.dAH)(_.getState()),E.getRootItems=()=>(0,o.ZVZ)(_.getState()),E.renderLinks=()=>{_.dispatch({type:"entry:refresh:link-list"})},E.renderScreenList=()=>{_.dispatch({type:"entry:update:screen:list"})},E.workspaceAlertAsync=s=>{let{title:n,desc:a,confirmText:d,renderDesc:l}=s;return new Promise(w=>{_.dispatch({type:"modal:update:confirm:state",payload:{isOpen:!0,canCancel:!1,title:n,desc:a,confirmText:d,renderDesc:l,onCancel:()=>w(!1),onConfirm:()=>w(!0)}})})},E.workspaceConfirmAsync=s=>{let{title:n,desc:a,className:d,confirmText:l,cancelText:w,renderDesc:f}=s;return new Promise(R=>{_.dispatch({type:"modal:update:confirm:state",payload:{isOpen:!0,className:d,title:n,desc:a,confirmText:l,cancelText:w,renderDesc:f,onCancel:()=>R(!1),onConfirm:()=>R(!0)}})})},E.DesignLibraryConfirmAsync=s=>{let{title:n,desc:a,className:d,confirmText:l,cancelText:w,onModalConfirm:f,renderDesc:R}=s;return new Promise(C=>{_.dispatch({type:"modal:update:confirm:state",payload:{isOpen:!0,className:d,title:n,desc:a,confirmText:l,cancelText:w,renderDesc:R,onCancel:()=>C(!1),onConfirm:()=>{C(!0),f()}}})})},_}},47662:(D,y,e)=>{"use strict";e.d(y,{J:()=>m});var i=e(20209),p=e(40769);const m=M=>{(0,i.zO)({defaultStyle:p.P,getStyleStr:{fontFamily:/modao.cc/.test(M)?o=>o+", sans-serif":o=>o}})}},23555:(D,y,e)=>{"use strict";e.d(y,{Z:()=>M});var i=e(89870),p=e(77200),m=e(93858);const M=(0,i.$j)(o=>{const P=(0,p.kc)(o),E=(0,p.GP)(o),{isWonderShare:t,isOnPremises:_}=(0,p.CD)(o),s=(0,p.Ds)(o),n=(0,p.ts)(o),a=(0,p.Nu)(o);return{user:n,mode:s,theme:a,previewOptions:E,previewSetting:P,isWonderShare:t,isOnPremises:_,isHiddenToolBar:(0,p.qe)(o)}})(m.Z)},46807:(D,y,e)=>{"use strict";e.d(y,{Z:()=>M});var i=e(89870),p=e(77200),m=e(45289);const M=(0,i.$j)(o=>{const P=(0,p.kc)(o),E=(0,p.GP)(o),t=(0,p.S7)(o),_=(0,p.EB)(o);return{previewOptions:E,previewSetting:P,isCommunityComboPreview:t,isPreviewCombo:_}})(m.Z)},24347:(D,y,e)=>{"use strict";var i=e(46198),p=e(71789),m=e(77276),M=e(7485),o=e(39110),P=e(21202);const E={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};window.$=window.jQuery=e(8435),e(39488),e(64615),e(63371),e(51575),e(11460);var t=e(14730),_=e(46807),s=e(10737),n=e(23555),a=e(70423);const d=L=>{const{isEmbedV1:v=!1}=L||{};return{isDesktop:!((0,a.tq)()||v),isInApp:!1,isMultiLink:!1,isMobile:(0,a.tq)(),isIOSClient:(0,a.B0)(),isStandAlone:(0,a.IF)(),isEmbedV1:v,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,a.Md)(),isForum:(0,a._j)(),isElectron:(0,a.d)(),isSquare:!1,isFeishu:(0,a.Rv)(),isWechat:(0,a.CL)(),...L}},l=L=>{const{isMobile:v,isEmbedV2:A,isSquare:j}=L;return v?s.Z:A||j?_.Z:n.Z};var w=e(15186),f=e(78467),R=e(75985),C=e(30733),se=e(76333),ae=e(77200);const de=L=>localStorageRemoveItem(L+"_pwd"),fe=L=>(0,C.GQ)(L+"_pwd"),Ee=(L,v)=>localStorageSetItem(L+"_pwd",v),W=L=>{const v=async(A,j,k)=>{try{const{isHTMLZip:b,isMobile:U}=getPreviewOptions(MB.webpackInterface.store.getState());b||(U&&MB.messageBucket.send("ready"),await checkAuthorization(A,j),MB.global.popupHelper.promptGetPasswordAsync(!1));const N=await L({projectAccessToken:A,projectVersion:k,projectEncryptedPassword:j,userLocale:window.MBLocale});return Ee(A,j),N}catch(b){console.error("[getProjectFullData] failed: "+b),de(A)}};return async A=>{let{projectAccessToken:j,projectVersion:k,projectEncryptedPassword:b,isPasswordRequired:U}=A;return b=b||new URLSearchParams(location.search).get("password")||fe(j),await K(v,U,j,b,k)||[]}},K=async(L,v,A,j,k)=>{let b;if(b=await L(A,j,k),!b&&!v){var U,N;(U=MB)==null||(N=U.messageBucket)==null||N.send("mobileLoadProjectError",{errMsg:I18N.dPages.no_permission_to_app})}let q=1/0,F=!1,ne=0;for(;!b&&q;)ne++,q--,j=md5(await MB.global.popupHelper.promptGetPasswordAsync(!0,F)),b=await L(A,j,k),b||(F=!0);return MB.global.popupHelper.promptGetPasswordAsync(!1),b},H=async(L,v)=>{let A;try{A=await checkAuthorization(L,v)}catch(j){A=j}return A},O=async function(L,v){v===void 0&&(v=MB.global.popupHelper);let A=!1,j=md5(await v.promptGetPasswordAsync(!0,!1));for((await H(L,j)).status===403&&(A=!0);A;)j=md5(await v.promptGetPasswordAsync(!0,A)),(await H(L,j)).status===403?A=!0:A=!1;return v.promptGetPasswordAsync(!1),j},T=(L,v,A)=>{if(!L)return!0;if(v){var j;return(A==null||(j=A.permissions.find(b=>b.user_id===L.id))==null?void 0:j.role)===void 0}else return L.id!==A.owner_id};var r=e(69930),u=e(86185),g=e(85322),I=e(24011),Y=e(53233),Z=e(79486),Me=e(70103),pe=e(89870),Ce=e(23895),ve=e(47423),oe=e(35269);const Be={isInNewGuide:!1,isOnPremises:!1,canUploadToSquare:!1},Fe=function(L){L===void 0&&(L="POPUP-HELPER-ROOT");const v=document.createElement("div");v.id=L,document.body.appendChild(v);const A=(0,Me.MT)(Ce.Z);i.render((0,oe.jsx)(pe.zt,{store:A,children:(0,oe.jsx)(ve.Z,{})}),v);const{confirmAsync:j,alertAsync:k,alertAsyncWide:b,alertAsyncBlocked:U,promptGetPasswordAsync:N,loginAsync:q,teamSelectModalAsync:F,sharingAsync:ne,chargeAsync:B,upgradeChatGPTAsync:z}=Ie(A.dispatch);return{confirmAsync:j,alertAsync:k,alertAsyncWide:b,alertAsyncBlocked:U,promptGetPasswordAsync:N,loginAsync:q,teamSelectModalAsync:F,sharingAsync:ne,chargeAsync:B,upgradeChatGPTAsync:z,destroy:()=>{i.unmountComponentAtNode(v),v.remove()}}},Ie=L=>({confirmAsync:B=>{let{className:z,title:X,desc:re,isHTML:me,confirmText:ee,cancelText:le,isClose:ye,theme:De}=B;return new Promise(Le=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,className:z,title:X,desc:re,isHTML:me,type:"alert",alertType:"confirm",canClose:ye!==!1,canCancel:!0,canConfirm:!0,cancelText:le,confirmText:ee,theme:De,onCancel:()=>Le(!1),onConfirm:()=>Le(!0)}}}))},alertAsync:B=>{let{title:z,desc:X,isHTML:re,confirmText:me}=B;return new Promise(ee=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:z,desc:X,isHTML:re,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:me,onConfirm:()=>ee()}}}))},alertAsyncWide:B=>{let{title:z,desc:X,isHTML:re,confirmText:me}=B;return new Promise(ee=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:z,desc:X,isHTML:re,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:me,onConfirm:()=>ee()}}}))},alertAsyncBlocked:B=>{let{title:z,desc:X,isHTML:re,confirmText:me}=B;return new Promise(ee=>L({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:z,desc:X,isHTML:re,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:me,onConfirm:()=>ee()}}}))},promptGetPasswordAsync:(B,z)=>new Promise(X=>L({type:"modal:update:state",payload:{previewAuthModal:{isOpen:B,isWrongPwd:z,onConfirm:re=>re&&X(re)}}})),loginAsync:B=>{let{onCancel:z=Ke,onConfirm:X=Ke,type:re="signin",source:me}=B;return L({type:"modal:update:state",payload:{loginModal:{source:me,isOpen:!0,type:re,onCancel:z,onConfirm:X}}})},teamSelectModalAsync:B=>{let{projectCid:z="",onCancel:X=Ke,onConfirm:re=Ke}=B;return L({type:"modal:update:state",payload:{teamSelectModal:{isOpen:!0,projectCid:z,onCancel:X,onConfirm:re}}})},sharingAsync:B=>{let{project:z,theme:X,isGuestMode:re,screenMetaList:me=[],onUpdateProject:ee=Ke,extraInfo:le=Be,screenMetaCidToVisit:ye,user:De}=B;return L({type:"modal:update:state",payload:{sharingModal:{isOpen:!0,project:z,theme:X,extraInfo:le,isGuestMode:re,screenMetaList:me,onUpdateProject:ee,screenMetaCidToVisit:ye,user:De}}})},chargeAsync:B=>L({type:"modal:update:state",payload:{chargeOverlay:{isOpen:!0,...B}}}),upgradeChatGPTAsync:B=>L({type:"modal:update:state",payload:{upgradeChatGPTModal:{isOpen:!0,...B}}})}),Ke=()=>{};var nt=e(46295),yt=e(62609);const{MB:ie}=window;ie.f.inSharing=!0;const Ot=L=>{let{initialData:v,designOptions:A,previewOptions:j,popupHelper:k,sharing:b,password:U,api:{requestProjectFullDataByAccessToken:N,requestSketchArtboardList:q,requestSketchArtboardById:F,requestSliceByArtboardId:ne,requestSliceZipByArtboardId:B,checkSharingPermission:z,fetchProjectComment:X,fetchProjectScreenCommentThreadCountMap:re,requestProjectShare:me,requestUserCommonGuidesData:ee,updateUserCommonGuidesData:le,fetchCreateCommentThread:ye,fetchCreateComment:De,fetchDeleteCommentThread:Le,fetchDeleteComment:Ge,updateProjectBasicsInfo:Ne,updateComboProjectBasicsInfo:Xe}}=L;const{isMobile:at,isIOSClient:st,isStandAlone:We,isHTMLZip:He}=j;ie.config.minFS=calcMinFontSize(),(We||st)&&(document.documentElement.style.height="100vh");const{runnerController:be,messageBucket:Qe,webpackInterface:ot,PreviewApp:Je}=createPreviewRelated(getPreviewComponentByOptions(j));return setExternal({api:{requestSketchArtboardList:q,requestSketchArtboardById:F,requestSliceByArtboardId:ne,requestSliceZipByArtboardId:B,checkSharingPermission:z,fetchProjectComment:X,fetchProjectScreenCommentThreadCountMap:re,requestUserCommonGuidesData:ee,updateUserCommonGuidesData:le,fetchCreateCommentThread:ye,fetchCreateComment:De,fetchDeleteCommentThread:Le,fetchDeleteComment:Ge,updateProjectBasicsInfo:Ne,updateComboProjectBasicsInfo:Xe}}),Object.assign(ie,{runnerController:be,messageBucket:Qe,webpackInterface:ot,global:{popupHelper:k,designOptions:A}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:j}}),{requestData:async et=>{var Ve,it,qe,ct;let{projectAccessToken:$e,projectEncryptedPassword:Gt,isPasswordRequired:ht,projectBasicCid:Wt}=et;const{user:Mt,org:Ct,team:Ft,orgList:Kt,preference:nr,MBSketchPluginDownloadURL:jt,canEditByCurrentUser:Nt,project_basic:ar,project_meta:fr,space:gr}=v,hr=getIsNeedInputPassword(Mt,gr,ar);let wt=loadProjectEncryptedPassword($e);const yr=await tryCheckAuthorization($e,wt);if(ht&&hr&&yr.status===403){var ir;ie==null||(ir=ie.messageBucket)==null||ir.send("ready"),wt=await checkAuthorizationWithPrompt($e,createPopupHelper()),saveProjectEncryptedPassword($e,wt)}let At,Ht;try{const{projectBasic:Ye,projectMeta:Tt}=await requestProjectFullDataFlat4ReadOnly({projectBasicCid:Wt,accessToken:$e,project_basic:ar,project_meta:fr,password:wt||U});At=Ye,Ht=Tt}catch(Ye){return setTimeout(()=>{var Tt,lr;return ie==null||(Tt=ie.messageBucket)==null?void 0:Tt.send("mobileLoadProjectError",{errMsg:"\u4EC5\u4F01\u4E1A\u6210\u5458\u53EF\u89C1-"+(ie!=null&&(lr=ie.user)!=null&&lr.id?"\u5DF2\u767B\u5F55\u4F46\u975E\u4F01\u4E1A\u6210\u5458":"\u672A\u767B\u5F55")})},1e3),crashedPageWithUser(Ye)}ie.webpackInterface.store.dispatch({type:"entry:preview:update:current:sharing",payload:{sharing:b}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:nr||{}}});const Er=Nt&&(Ht.is_org_project?!((Ve=At)!=null&&Ve.expired):!((it=At)!=null&&it.expired)||Mt.apps.length<=Mt.free_projects_count);if(Object.assign(ie,{user:Mt||{},canEditByCurrentUser:Er,org:Ct||void 0}),ie.webpackInterface.store.dispatch({type:"entry:state:init"}),(qe=ie.user)!=null&&qe.id&&Ct)try{const Ye=await DesignAPI.requestOrgMembers(Ct.cid);ie.members=Ye}catch(Ye){console.log(Ye)}(ct=ie.user)!=null&&ct.id&&ie.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"}),hideLoading();let cr="[]";try{const{guide:Ye}=await ee();cr=(Ye==null?void 0:Ye.workspace_guides)||[]}catch(Ye){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}return initCommonGuide({store:ie.webpackInterface.store,commonGuidesData:cr,api:{updateUserCommonGuidesData:le},isDesign:!1,isPreview:!0}),{projectAlike:At,projectMeta:Ht,projectShare:b}},renderPreview:(et,Ve,it,qe)=>{if(qe!=null&&qe.screen_visible_switch&&(qe==null?void 0:qe.screen_visible_list.length)===0)return setTimeout(()=>{var ht;return ie==null||(ht=ie.messageBucket)==null?void 0:ht.send("mobileLoadProjectError",{errMsg:"\u9875\u9762\u65E0\u753B\u677F\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),_jsx(CrashedPage,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")});const ct=new KeyboardManager,$e=new URLSearchParams(location.search),Gt=at?"preview":$e.has("inspect")?"inspect":$e.has("comment")?"comment":"preview";return _jsx(KeyboardManagerContext.Provider,{value:ct,children:_jsx(TooltipsManagerProvider,{children:_jsx(Je,{store:ot.store,previewMode:Gt,projectAlike:et,projectMeta:Ve,projectShare:qe})})})}}},Et=L=>{let{initialData:v,designOptions:A,previewOptions:j,popupHelper:k,sharing:b,password:U,api:{requestProjectFullDataByAccessToken:N,requestSketchArtboardList:q,requestSketchArtboardById:F,requestSliceByArtboardId:ne,requestSliceZipByArtboardId:B,checkSharingPermission:z,requestProjectShare:X,requestUserCommonGuidesData:re,updateUserCommonGuidesData:me,updateProjectBasicsInfo:ee,updateComboProjectBasicsInfo:le}}=L;const{isMobile:ye,isIOSClient:De,isStandAlone:Le,isHTMLZip:Ge}=j;ie.config.minFS=(0,t.T_)(),(Le||De)&&(document.documentElement.style.height="100vh");const{runnerController:Ne,messageBucket:Xe,webpackInterface:at,PreviewApp:st}=(0,w.o)(l(j));return(0,r.J)({api:{requestSketchArtboardList:q,requestSketchArtboardById:F,requestSliceByArtboardId:ne,requestSliceZipByArtboardId:B,checkSharingPermission:z,requestUserCommonGuidesData:re,updateUserCommonGuidesData:me,updateProjectBasicsInfo:ee,updateComboProjectBasicsInfo:le}}),Object.assign(ie,{runnerController:Ne,messageBucket:Xe,webpackInterface:at,global:{popupHelper:k,designOptions:A}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:j}}),{requestData:async We=>{var He;let{projectAccessToken:be,projectEncryptedPassword:Qe,isPasswordRequired:ot,projectBasicCid:Je}=We;const{user:et,org:Ve,team:it,orgList:qe,preference:ct,MBSketchPluginDownloadURL:$e,canEditByCurrentUser:Gt,project_basic:ht,project_meta:Wt,space:Mt}=v,Ct=fe(be);let Ft,Kt;try{const{projectBasic:jt,projectMeta:Nt}=await(0,Z.jr)({projectBasicCid:Je,accessToken:be,project_basic:ht,project_meta:Wt,password:Ct||U});Ft=jt,Kt=Nt}catch(jt){return(0,f.mB)(jt)}return ie.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:b}}),ie.webpackInterface.store.dispatch({type:"entry:preview-setting:update:is-highlight",payload:{isHighlight:(He=b.highlight)!=null?He:!0}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:ct||{}}}),Object.assign(ie,{user:et||{},canEditByCurrentUser:!1,org:Ve||void 0}),ie.webpackInterface.store.dispatch({type:"entry:state:init"}),(0,u.Z)(),{projectAlike:Ft,projectMeta:Kt}},renderPreview:(We,He,be,Qe)=>{if(Qe!=null&&Qe.screen_visible_switch&&(Qe==null?void 0:Qe.screen_visible_list.length)===0)return setTimeout(()=>{var Ve;return ie==null||(Ve=ie.messageBucket)==null?void 0:Ve.send("mobileLoadProjectError",{errMsg:"\u9875\u9762\u65E0\u753B\u677F\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),(0,oe.jsx)(m.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>(0,f.HM)("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")});const ot=new g.Sm,Je=new URLSearchParams(location.search),et=ye?"preview":Je.has("inspect")?"inspect":Je.has("comment")?"comment":"preview";return(0,oe.jsx)(g.XC.Provider,{value:ot,children:(0,oe.jsx)(I.Z,{children:(0,oe.jsx)(st,{store:at.store,previewMode:et,projectAlike:We,projectMeta:He,projectShare:Qe})})})}}},vt=L=>{let{initialData:v,designOptions:A,previewOptions:j,popupHelper:k,api:{requestProjectFullDataByAccessToken:b,requestSketchArtboardList:U,requestSketchArtboardById:N,requestSliceByArtboardId:q,requestSliceZipByArtboardId:F,checkSharingPermission:ne,fetchProjectComment:B,fetchProjectScreenCommentThreadCountMap:z,requestProjectShare:X,requestUserCommonGuidesData:re,updateUserCommonGuidesData:me,fetchCreateCommentThread:ee,fetchCreateComment:le,fetchDeleteCommentThread:ye,fetchDeleteComment:De,updateProjectBasicsInfo:Le,updateComboProjectBasicsInfo:Ge},experienceLoginModalHelper:Ne}=L;const{isIOSClient:Xe,isStandAlone:at}=j,st=projectShareMock;ie.config.minFS=calcMinFontSize(),(at||Xe)&&(document.documentElement.style.height="100vh");const{runnerController:We,messageBucket:He,webpackInterface:be,PreviewApp:Qe}=createPreviewRelated(getPreviewComponentByOptions(j));return setExternal({api:{requestSketchArtboardList:U,requestSketchArtboardById:N,requestSliceByArtboardId:q,requestSliceZipByArtboardId:F,checkSharingPermission:ne,fetchProjectComment:B,fetchProjectScreenCommentThreadCountMap:z,requestUserCommonGuidesData:re,updateUserCommonGuidesData:me,fetchCreateCommentThread:ee,fetchCreateComment:le,fetchDeleteCommentThread:ye,fetchDeleteComment:De,updateProjectBasicsInfo:Le,updateComboProjectBasicsInfo:Ge}}),Object.assign(ie,{runnerController:We,messageBucket:He,webpackInterface:be,global:{popupHelper:k,designOptions:A,experienceLoginModalHelper:Ne}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:options",payload:{previewOptions:j}}),{requestData:async ot=>{var Je;let{projectBasicCid:et}=ot;const{user:Ve,org:it,preference:qe}=v,{projectBasic:ct,projectMeta:$e}=await requestExperienceFullDataFlat({projectBasicCid:et});return ie.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:st}}),ie.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:qe||{}}}),Object.assign(ie,{user:Ve||{},canEditByCurrentUser:!1,org:it||void 0}),ie.webpackInterface.store.dispatch({type:"entry:state:init"}),(Je=ie.user)!=null&&Je.id&&ie.webpackInterface.store.dispatch({type:"entry:comment:rebuild:commentList"}),hideLoading(),{projectAlike:ct,projectMeta:$e}},renderPreview:(ot,Je,et)=>{const Ve=new KeyboardManager,it="preview";return _jsx(KeyboardManagerContext.Provider,{value:Ve,children:_jsx(TooltipsManagerProvider,{children:_jsx(Qe,{store:be.store,previewMode:it,projectAlike:ot,projectMeta:Je,projectShare:st})})})}}};var G=e(38625),V=e(32380),ue=e(37506),ge=e(53236),te=e(50155);const Pe=L=>{let{projectMeta:v,screenGlueList:A,screenMetaList:j,screenObjectList:k,nextUpperCid:b,nextProjectMetaCid:U=getRandomProjectMetaCid()}=L;const N=buildProjectDocument({projectMeta:v,screenGlueList:A,screenMetaList:j,screenObjectList:k}),{projectDocument:q}=remapProjectStoreLocalProjectDocument(N,createRemapOptionForFullProjectDocument({projectMetaCid:v.cid,remapProjectMetaCid:U})),{projectMeta:F,screenGlueList:ne,screenMetaList:B,screenObjectList:z}=unbuildProjectDocument(q);return F.upper_cid=b,{projectMeta:F,screenGlueList:ne,screenMetaList:B,screenObjectList:z}};var Re=e(44766),ke=e(95046),Ze=e(59729);const ze=async L=>{MB.safeLoading&&MB.safeLoading(I18N.dApis.save);const v=MB.getRootProject(),A={name:v.title,device:v.device,model:v.model,width:v.width,height:v.height,attr:v.attr};try{const{clientData:{upperCid:j}}=await newFlpakFromTree(window.fssDat.getFlatStore().getFlatTree(),L,A);refreshLocationHref("/proto/design/"+j)}catch(j){console.error("eTASAL",j)}},tt={workspace:"me",link_line:!0,link_display:2,grid:!1,grid_size:10,ruler:!0,show_ruler_line:!0,show_align_line:!0,guide:!0,dashboard_guides:'["switch_workspace","design_mode"]',app_order:"asc",theme:"light",contain_select:!1,show_tooltip:!0,show_fs_warning:!0,show_toolbar_text:!0,show_drag_mode:!0,layout_information:null,recent_icons:"[]",recent_svg_icons:"[]",icon_size:null,icon_color:null,notification_status_filter:"all",builtin_list_invisible:"[]",show_daily_tips:!0,use_native_eyedropper:!1,state_link_default_transition:1,panel_link_default_transition:1},Dt=async()=>({...await requestWorkspaceInitialData(),preference}),Jt=async L=>{MB.safeLoading&&MB.safeLoading("\u9879\u76EE\u6062\u590D\u4E2D\uFF0C\u8BF7\u7A0D\u540E...");const{prevProjectBasicAttrs:v,projectMeta:A,importProjectBasicCid:j}=MB.importData,k={...A,upper_cid:j};await fetchPostHead("/api/admin/v3/project_basic/recovery",{upper_cid:j,team_cid:L,project_meta:k,prevProjectBasicAttrs:v})},qt=async()=>{const{projectDocumentToRecover:L,isImportImage:v,importImagePrefix:A}=window.RECOVERY_DATA,{projectAlikeBasicJSON:j,projectMeta:k,screenGlueNodeList:b}=L,U=[],{screenGlueList:N,screenMetaList:q,screenObjectList:F}=unbuildProjectDocument({projectMeta:k,screenGlueNodeList:b}),{cid:ne,name:B,device:z,model:X,width:re,height:me,visibility:ee}=j,le=getRandomProjectMetaCid(),{projectMeta:ye,screenGlueList:De,screenMetaList:Le,screenObjectList:Ge}=duplicateProjectMeta({nextUpperCid:ne,nextProjectMetaCid:le,projectMeta:k,screenGlueList:N,screenMetaList:q,screenObjectList:F}),Ne=getRandomCid("pr");if(MB.importData={prevProjectBasicAttrs:{name:B,device:z,model:X,width:re,height:me,visibility:ee},projectMeta:ye,importProjectBasicCid:Ne},v){const Xe=new Set([j.splash]);for(const{stateList:We}of Ge)for(const{itemList:He}of We)for(const be of He)be.image&&be.image.charAt(0)==="/"&&Xe.add(""+A+be.image);const at=[...Xe].filter(Boolean),st={};for(const We of at){const{asset:He}=await fetchPutJSON("/api/admin/v3/assets/create_from_url",{project_cid:Ne,asset_url:We,user_id:MB.user.id});st[We]=He.image}for(const{stateList:We}of Ge)for(const{itemList:He}of We)for(const be of He)be.image&&be.image.charAt(0)==="/"&&(be.image=st[""+A+be.image])}return{projectMeta:ye,screenGlueList:De,screenMetaList:Le,projectScreenObjectList:Ge,projectBasic:j,screenAlignList:U}};var $t=e(7221);const Yt=async L=>({...await fetchGetJSON("/api/web/v3/experience/design/initial?market_template_cid="+L),preference:{workspace:"me",link_line:!0,link_display:2,grid:!1,grid_size:10,ruler:!0,show_ruler_line:!0,show_align_line:!0,guide:!0,dashboard_guides:'["switch_workspace", "design_mode"]',app_order:"asc",theme:"light",contain_select:!1,show_tooltip:!0,show_fs_warning:!0,show_drag_mode:!0,layout_information:null,recent_icons:"[]",recent_svg_icons:"[]",icon_size:null,icon_color:null,notification_status_filter:"all",builtin_list_invisible:"[]",show_daily_tips:!0,state_link_default_transition:1,panel_link_default_transition:1,recently_used_screen_meta_icons:"[]"}}),St=async L=>{let{projectUpperCid:v}=L;const{projectMetaList:[A],screenGlueList:j,screenMetaList:k,projectScreenObjectList:b,projectUpper:U,screenAlignList:N}=await fetchDataMarketTemplate({projectUpperCid:v}),q=getRandomProjectMetaCid();A.upper_type="project-basic";const{projectMeta:F,screenGlueList:ne,screenMetaList:B,screenObjectList:z}=duplicateProjectMeta({nextUpperCid:v,nextProjectMetaCid:q,projectMeta:A,screenGlueList:j,screenMetaList:k,screenObjectList:b}),X=new Map;return B.forEach((re,me)=>{const ee=k[me],{cid:le,project_meta_cid:ye}=ee,De="/snapshot.png?projectMetaCid="+ye+"&screenMetaCid="+le+"&screenStateCid=FIRST_STATE&zoomMode=thumbnail&cacheTag=cache";X.set(re.cid,De)}),MB.experienceData={projectUpperCid:v,projectMeta:F,experienceSnapshotUrlMap:X},{projectMeta:F,screenGlueList:ne,screenMetaList:B,projectScreenObjectList:z,projectBasic:{...U,limitation:{collaborators:0,storage:2e3,exportable:["png","pngs","htmlzip"],encryptable:!0,inspectable:!0,slices:!0,projects:6553500,screens:6553500,commentable:!0}},screenAlignList:N,experienceSnapshotUrlMap:X}},Lt=async()=>({marketTemplateList:[],marketTemplateListMap:new Map,iconLibraryList:[],iconLibraryListMap:new Map}),bt=L=>{const v={...L,created_at:new Date().valueOf()},A={cid:getRandomCid("p"),mtime:Date.now()/1e3,upper_cid:v.cid,upper_type:"user-combo"};return{user_combo_group:v,project_meta:A}},Xt=L=>{let{isLoggedIn:v,isImport:A}=L;return{requestUserAssetGroupList:()=>v||A?designAPI.requestUserAssetGroupList():{userAssetGroupList:[]},requestConfigurationData:designAPI.requestConfigurationData,requestConfigurationSquareTopicData:designAPI.requestConfigurationSquareTopicData,requestWorkspaceConfiguration:designAPI.requestWorkspaceConfiguration,requestConfigurationHotKeyWords:designAPI.requestConfigurationHotKeyWords,requestRecentKeywords:designAPI.requestRecentKeywords,requestDeleteRecentKeywords:designAPI.requestDeleteRecentKeywords,requestAddRecentKeywords:designAPI.requestAddRecentKeywords,requestConfigurationWorkspaceLabels:designAPI.requestConfigurationWorkspaceLabels,requestIconGroupIconDataForCid:designAPI.requestIconGroupIconDataForCid,requestFindMarketTemplates:designAPI.requestFindMarketTemplates,requestSearchResourcesData:designAPI.requestSearchResourcesData,requestResourcesDetails:designAPI.requestResourcesDetails,requestHotIcons:designAPI.requestHotIcons,requestMarketTemplateDataFromCid:designAPI.requestMarketTemplateDataFromCid,requestUpdateScreenAlign:designAPI.requestUpdateScreenAlign,requestSketchArtboardList:async()=>({artboards:[]}),requestSketchArtboardById:()=>null,requestSliceByArtboardId:async()=>({slices:[]}),requestSliceZipByArtboardId:async()=>({url:"/mock-slice.zip",status:200}),requestUserCommonGuidesData:async()=>({guide:{dashboard_guides:"",workspace_guides:'["newFeature", "videoTip", "widgetState", "pageState", "trashTip", "versioins"]',workspace_guides_version:"v2",default_team_cid:""},guide_project_template_cid:""}),updateUserCommonGuidesData:()=>null,updateUser2203GuidesData:()=>null,checkSharingPermission:async()=>(await new Promise(j=>setTimeout(j,100)),!0),fetchProjectComment:async()=>({org:null,team:null,members:[],threads:[],comments:[]}),fetchProjectScreenCommentThreadCountMap:()=>null,updateProjectBasicsInfo:()=>null,updateComboProjectBasicsInfo:()=>null,requestProjectShare,updateCurrentProjectShare:()=>null,requestMarketTemplateFullDataByCid:j=>{let{projectUpperCid:k}=j;return A?requestMarketTemplateFullDataByCidImport():St({projectUpperCid:k})},requestUserComboGroupDataFromCid:j=>{let{userComboGroupCid:k}=j;return v||A?designAPI.requestUserComboGroupDataFromCid({userComboGroupCid:k}):null},requestUserComboGroupList:j=>v||A?designAPI.requestUserComboGroupList(j):{userComboGroupList:[]},requestCreateUserComboGroup:j=>v||A?designAPI.requestCreateUserComboGroup(j):bt(j),requestUpdateUserComboGroup:j=>v||A?designAPI.requestUpdateUserComboGroup(j):{user_combo_group:j},requestDeleteUserComboGroup:j=>v||A?designAPI.requestDeleteUserComboGroup(j):null,requestMarketTemplateDataForLibrary:()=>v||A?designAPI.requestMarketTemplateDataForLibrary():Lt(),requestMarketTemplateItemUnused:j=>{let{marketTemplateCid:k}=j;return v||A?designAPI.requestMarketTemplateItemUnused({marketTemplateCid:k}):null},requestMarketTemplateItemListDataForLibrary:j=>{let{projectMetaList:k,screenGlueList:b,screenMetaList:U}=j;return v||A?designAPI.requestMarketTemplateItemListDataForLibrary({projectMetaList:k,screenGlueList:b,screenMetaList:U}):null},experienceTriggerAllSaveAfterLogin:j=>A?experienceTriggerAllSaveAfterLoginImport(j):experienceTriggerAllSaveAfterLogin(j),requestUserStarredList,requestUserUsedResources,requestStarredResources,requestUnStarredResources,requestResourcesDetailData,requestRecentResourcesList,requestResourcesListForSource,requestUpdateRecentImportResources,requestResourcesListByCategory:j=>{let{category:k,keyword:b}=j;return designAPI.requestResourcesListByCategory({category:k,keyword:b})}}},Qt=async L=>{let{initialData:v,previewOptions:A,api:j,projectAccessToken:k,projectEncryptedPassword:b,isPasswordRequired:U,$root:N,projectBasicCid:q,sharing:F,password:ne}=L;const B={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!v.is_on_premises,isWonderShare:!!v.is_wonder_share},{requestData:z,renderPreview:X}=initPreview({api:j,initialData:v,popupHelper:createPopupHelper(),previewOptions:A,designOptions:B,sharing:F,password:ne});U&&setTimeout(()=>previewNoAccessSaTrack("\u5BC6\u7801\u67E5\u770B-\u9700\u8F93\u5165\u5BC6\u7801"),0);const{projectAlike:re,projectMeta:me,projectShare:ee}=await z({projectAccessToken:k,projectEncryptedPassword:b,isPasswordRequired:U,projectBasicCid:q}),le=location.hash||"",ye=le&&le.startsWith("#screen=")&&le.substr(8);ReactDOM.render(X(re,me,ye,ee),N)},It=async L=>{let{initialData:v,previewOptions:A,api:j,projectAccessToken:k,projectEncryptedPassword:b,isPasswordRequired:U,$root:N,projectBasicCid:q,sharing:F,password:ne}=L;const B={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!v.is_on_premises,isWonderShare:!!v.is_wonder_share},{requestData:z,renderPreview:X}=Et({api:j,initialData:v,popupHelper:Fe(),previewOptions:A,designOptions:B,sharing:F,password:ne});U&&setTimeout(()=>(0,G.CQ)("\u5BC6\u7801\u67E5\u770B-\u9700\u8F93\u5165\u5BC6\u7801"),0);const{projectAlike:re,projectMeta:me}=await z({projectAccessToken:k,projectEncryptedPassword:b,isPasswordRequired:U,projectBasicCid:q}),ee=location.hash||"",le=ee&&ee.startsWith("#screen=")&&ee.substr(8);i.render(X(re,me,le),N)},er=async L=>{let{initialData:v,previewOptions:A,$root:j,projectBasicCid:k}=L;const{user:b}=v,U=!!b,N={isDesign:!0,isExperience:!U,isLoggedExperience:U,isOnPremises:!!v.is_on_premises,isWonderShare:!!v.is_wonder_share},q=createExperienceAPI({isLoggedIn:U,isImport:!1}),{requestData:F,renderPreview:ne}=initExperiencePreview({api:q,initialData:v,popupHelper:createPopupHelper(),previewOptions:A,designOptions:N,experienceLoginModalHelper}),{projectAlike:B,projectMeta:z}=await F({projectBasicCid:k}),X=location.hash||"",re=X&&X.startsWith("#screen=")&&X.substr(8);ReactDOM.render(ne(B,z,re),j)};var he=e(20018),Bt=e(7627),ce=e.n(Bt),pt=e(21563),Rt=e(62737),ut=e(21426),je=e(1e3),kt=e(45090);const _t=kt.default.div.withConfig({displayName:"styles__StyledExampleApp",componentId:"sc-93zovs-0"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.mb-loading{position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;}}.mb-design-page{&,#mb-toolbar,.mb-left-panel{transition:all 0.2s ease-in-out;}&.is-collapse{opacity:0;#mb-toolbar{transform:translateY(-100%);}.mb-left-panel{transform:translateX(-100%);}.mb-rightpane{transform:translateX(100%);}}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;transition:all 0.2s ease-in-out;&.is-collapse{opacity:0;}}"]);var mt=e(43980),Pt=e(27940),ft=e(4091),xe=e(65155);const Ut=L=>/\/app\/experience\//.test(L),xt=L=>/\/app\/design\//.test(L),gt=L=>/\/app\//.test(L)&&!Ut(L)&&!xt(L);class tr extends M.PureComponent{constructor(v){var A;super(v),A=this,(0,he.Z)(this,"mousewheelHandle",B=>{const z=B.deltaX||B.wheelDeltaX;if(!z)return;const X=document.getElementById("workspace"),re=X.scrollLeft+X.offsetWidth===X.scrollWidth&&z>0,me=X.scrollLeft===0&&z<0;(re||me)&&B.preventDefault()}),(0,he.Z)(this,"playDesignPageLeaveAnimation",function(B){return B===void 0&&(B=200),A.setState({isDesignCollapse:!0}),new Promise(z=>setTimeout(z,B))}),(0,he.Z)(this,"handleBackButtonClick",async()=>{var B;if((0,xe._$)()){(0,xe.gB)(xe.Kk.enterPreview);return}const{initialData:{goback_url:z}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(z||"/dashboard/"+(((B=MB.currentOrg)==null?void 0:B.cid)||"me"))}),(0,he.Z)(this,"handlePlayButtonClick",async(B,z,X)=>{let{isInspect:re,isComment:me}=X;await this.playDesignPageLeaveAnimation();const le={previewMode:re?"inspect":me?"comment":"preview",projectCid:B,screenCid:z};this.setState({isPreview:!0,previewData:le})}),(0,he.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"keyboardManager",new g.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null};const{popupHelper:j,designOptions:k,api:b,initialData:U,prepareProjectUpper:N}=v,{requestData:q,renderDesign:F,renderPreview:ne}=(0,ut.a7)({api:b,popupHelper:j,experienceLoginModalHelper:V.m,initialData:U,designOptions:k,prepareProjectUpper:N,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount});this.requestData=q,this.renderDesign=F}componentDidMount(){const v=performance.now(),{projectUpperCid:A,initialData:j,designOptions:k}=this.props;let b=!1;location.pathname.includes((0,ft.S3)("review"))&&(b=!0),Promise.all([this.requestData(A,b),new Promise(N=>setTimeout(N,800))]).then(N=>{let[{projectAlike:q,projectMeta:F}]=N;this.setState({projectAlike:q,projectMeta:F},()=>{this.setState({isDataLoaded:!0})});const ne=performance.now(),B=Math.ceil((ne-v)/1e3);typeof je.U1=="function"&&(0,je.U1)("load_success_project",{load_time:B,project_name:j.projectName,project_cid:A,project_type:"\u539F\u578B V8",success:1,source:k.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&gt(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u7F16\u8F91\u6A21\u5F0F"}),B>30&&(0,mt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(N=>{console.error("[ExampleApp] requestData failed",N),typeof je.U1=="function"&&(0,je.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:N,preview_type:"\u7F16\u8F91\u6A21\u5F0F"})});const U=document.getElementById("workspace");U&&U.addEventListener("mousewheel",this.mousewheelHandle)}componentWillUnmount(){const v=document.getElementById("workspace");v&&v.removeEventListener("mousewheel",this.mousewheelHandle,{capture:!0})}render(){const{screenCid:v,designOptions:A}=this.props,{isLoading:j,isDataLoaded:k,isDesignCollapse:b,isPreview:U,previewData:N,projectAlike:q,projectMeta:F}=this.state,{renderDesign:ne,handleBackToDesign:B,renderPreview:z}=this,{isWonderShare:X}=A;let re=!1;return location.pathname.includes((0,ft.S3)("review"))&&(re=!0),(0,oe.jsx)(g.XC.Provider,{value:this.keyboardManager,children:(0,oe.jsx)(I.Z,{children:(0,oe.jsxs)(_t,{className:"example-app",children:[k&&(0,oe.jsx)(M.Fragment,{children:(0,oe.jsx)(Rt.Z,{screenCid:v,isCollapse:b,projectAlike:q,projectMeta:F,renderDesign:ne,isFromReadOnly:re})}),j&&(0,oe.jsx)(pt.Z,{className:"mb-loading",isNormal:X})]})})})}}(0,he.Z)(tr,"propTypes",{api:ce().object,initialData:ce().object,projectUpperCid:ce().string,screenCid:ce().string,designOptions:ce().object,prepareProjectUpper:ce().func,popupHelper:ce().object});class c extends M.PureComponent{constructor(v){var A;super(v),A=this,(0,he.Z)(this,"playDesignPageLeaveAnimation",function(ee){return ee===void 0&&(ee=200),A.setState({isDesignCollapse:!0}),new Promise(le=>setTimeout(le,ee))}),(0,he.Z)(this,"handleBackButtonClick",async()=>{var ee;if((0,xe._$)()){(0,xe.gB)(xe.Kk.enterPreview);return}const{initialData:{goback_url:le}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(le||"/dashboard/"+(((ee=MB.currentOrg)==null?void 0:ee.cid)||"me"))}),(0,he.Z)(this,"handlePlayButtonClick",async(ee,le,ye)=>{let{isInspect:De,isComment:Le}=ye;await this.playDesignPageLeaveAnimation();const Ne={previewMode:De?"inspect":Le?"comment":"preview",projectCid:ee,screenCid:le};this.setState({isPreview:!0,previewData:Ne})}),(0,he.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"keyboardManager",new g.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null,projectShare:void 0};const{popupHelper:j,designOptions:k,api:b,initialData:U,prepareProjectUpper:N,sharing:q,password:F,isHtmlZip:ne,isSquare:B,isEmbedV2:z}=v,X=!(ne||B||z),{requestData:re,renderDesign:me}=(0,ut.nr)({api:b,popupHelper:j,experienceLoginModalHelper:V.m,initialData:U,designOptions:k,prepareProjectUpper:N,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:q,password:F,showGuide:X});this.requestData=re,this.renderDesign=me}componentDidMount(){const v=performance.now(),{projectUpperCid:A,initialData:j,designOptions:k}=this.props;let b=!1;location.pathname.includes((0,ft.S3)("review"))&&(b=!0),Promise.all([this.requestData(A,b),new Promise(U=>setTimeout(U,800))]).then(U=>{let[{projectAlike:N,projectMeta:q,projectShare:F}]=U;this.setState({projectAlike:N,projectMeta:q,projectShare:F},()=>{this.setState({isDataLoaded:!0})});const ne=performance.now(),B=Math.ceil((ne-v)/1e3);typeof je.U1=="function"&&(0,je.U1)("load_success_project",{load_time:B,project_name:j.projectName,project_cid:A,project_type:"\u539F\u578B V8",success:1,source:k.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&gt(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u53EA\u8BFB\u6A21\u5F0F"}),B>30&&(0,mt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(U=>{console.error("[ExampleApp] requestData failed",U),typeof je.U1=="function"&&(0,je.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:U,preview_type:"\u53EA\u8BFB\u6A21\u5F0F"})})}render(){const{screenCid:v,designOptions:A,isHtmlZip:j}=this.props,{isLoading:k,isDataLoaded:b,isDesignCollapse:U,projectAlike:N,projectMeta:q,projectShare:F}=this.state,{renderDesign:ne}=this,{isWonderShare:B}=A;return F!=null&&F.screen_visible_switch&&(F==null?void 0:F.screen_visible_list.length)===0?(0,oe.jsx)(m.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}):(0,oe.jsx)(g.XC.Provider,{value:this.keyboardManager,children:(0,oe.jsx)(I.Z,{children:(0,oe.jsxs)(_t,{className:"example-app",children:[b&&(0,oe.jsx)(M.Fragment,{children:(0,oe.jsx)(Pt.R,{screenCid:v,isCollapse:U,projectAlike:N,projectMeta:q,renderDesign:ne,projectShare:F,isHtmlZip:j})}),k&&(0,oe.jsx)(pt.Z,{className:"mb-loading",isNormal:B})]})})})}}(0,he.Z)(c,"propTypes",{api:ce().object,initialData:ce().object,projectUpperCid:ce().string,screenCid:ce().string,designOptions:ce().object,prepareProjectUpper:ce().func,popupHelper:ce().object,sharing:ce().object,password:ce().string,isHtmlZip:ce().bool,isSquare:ce().bool,isEmbedV2:ce().bool});class h extends M.PureComponent{constructor(v){var A;super(v),A=this,(0,he.Z)(this,"playDesignPageLeaveAnimation",function(le){return le===void 0&&(le=200),A.setState({isDesignCollapse:!0}),new Promise(ye=>setTimeout(ye,le))}),(0,he.Z)(this,"handleBackButtonClick",async()=>{var le;if((0,xe._$)()){(0,xe.gB)(xe.Kk.enterPreview);return}const{initialData:{goback_url:ye}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(ye||"/dashboard/"+(((le=MB.currentOrg)==null?void 0:le.cid)||"me"))}),(0,he.Z)(this,"handlePlayButtonClick",async(le,ye,De)=>{let{isInspect:Le,isComment:Ge}=De;await this.playDesignPageLeaveAnimation();const Xe={previewMode:Le?"inspect":Ge?"comment":"preview",projectCid:le,screenCid:ye};this.setState({isPreview:!0,previewData:Xe})}),(0,he.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"keyboardManager",new g.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null,projectShare:void 0};const{popupHelper:j,designOptions:k,api:b,initialData:U,prepareProjectUpper:N,sharing:q,password:F,isHtmlZip:ne,isSquare:B,isEmbedV2:z,projectVersion:X}=v,re=!(ne||B||z),{requestData:me,renderDesign:ee}=(0,ut.oI)({api:b,popupHelper:j,experienceLoginModalHelper:V.m,initialData:U,designOptions:k,prepareProjectUpper:N,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:q,password:F,showGuide:re,projectVersion:X});this.requestData=me,this.renderDesign=ee,MB.isVersion=!0}componentDidMount(){const v=performance.now(),{projectUpperCid:A,initialData:j,designOptions:k}=this.props;let b=!1;location.pathname.includes((0,ft.S3)("review"))&&(b=!0),Promise.all([this.requestData(A,b),new Promise(U=>setTimeout(U,800))]).then(U=>{let[{projectAlike:N,projectMeta:q,projectShare:F}]=U;this.setState({projectAlike:N,projectMeta:q,projectShare:F},()=>{this.setState({isDataLoaded:!0})});const ne=performance.now(),B=Math.ceil((ne-v)/1e3);typeof je.U1=="function"&&(0,je.U1)("load_success_project",{load_time:B,project_name:j.projectName,project_cid:A,project_type:"\u539F\u578B V8",success:1,source:k.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&gt(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91",preview_type:"\u7248\u672C\u7BA1\u7406"}),B>30&&(0,mt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(U=>{console.error("[ExampleApp] requestData failed",U),typeof je.U1=="function"&&(0,je.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:U,preview_type:"\u7248\u672C\u7BA1\u7406"})})}render(){const{screenCid:v,designOptions:A,isHtmlZip:j}=this.props,{isLoading:k,isDataLoaded:b,isDesignCollapse:U,projectAlike:N,projectMeta:q,projectShare:F}=this.state,{renderDesign:ne}=this,{isWonderShare:B}=A;return F!=null&&F.screen_visible_switch&&(F==null?void 0:F.screen_visible_list.length)===0?(0,oe.jsx)(m.Z,{errorType:404,customTitle:I18N.dModule.zero_screen_err_title,customDes:I18N.dModule.zero_screen_err_des,isShowSecondaryBtn:!1,primaryClick:()=>backToHomePageWithSaTrack("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}):(0,oe.jsx)(g.XC.Provider,{value:this.keyboardManager,children:(0,oe.jsx)(I.Z,{children:(0,oe.jsxs)(_t,{className:"example-app",children:[b&&(0,oe.jsx)(M.Fragment,{children:(0,oe.jsx)(Pt.R,{screenCid:v,isCollapse:U,projectAlike:N,projectMeta:q,renderDesign:ne,projectShare:F,isHtmlZip:j})}),k&&(0,oe.jsx)(pt.Z,{className:"mb-loading",isNormal:B})]})})})}}(0,he.Z)(h,"propTypes",{api:ce().object,initialData:ce().object,projectUpperCid:ce().string,screenCid:ce().string,designOptions:ce().object,prepareProjectUpper:ce().func,popupHelper:ce().object,sharing:ce().object,password:ce().string,isHtmlZip:ce().bool,isSquare:ce().bool,isEmbedV2:ce().bool,projectVersion:ce().string});class S extends M.PureComponent{constructor(v){var A;super(v),A=this,(0,he.Z)(this,"playDesignPageLeaveAnimation",function(ee){return ee===void 0&&(ee=200),A.setState({isDesignCollapse:!0}),new Promise(le=>setTimeout(le,ee))}),(0,he.Z)(this,"handleBackButtonClick",async()=>{var ee;if((0,xe._$)()){(0,xe.gB)(xe.Kk.enterPreview);return}const{initialData:{goback_url:le}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(le||"/dashboard/"+(((ee=MB.currentOrg)==null?void 0:ee.cid)||"me"))}),(0,he.Z)(this,"handlePlayButtonClick",async(ee,le,ye)=>{let{isInspect:De,isComment:Le}=ye;await this.playDesignPageLeaveAnimation();const Ne={previewMode:De?"inspect":Le?"comment":"preview",projectCid:ee,screenCid:le};this.setState({isPreview:!0,previewData:Ne})}),(0,he.Z)(this,"handleDesignDidMount",()=>{this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"handleBackToDesign",()=>{this.setState({isPreview:!1,isDesignCollapse:!1})}),(0,he.Z)(this,"keyboardManager",new g.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,previewData:null,projectAlike:null,projectMeta:null};const{popupHelper:j,designOptions:k,api:b,initialData:U,prepareProjectUpper:N,sharing:q,password:F,isHtmlZip:ne,isSquare:B,isEmbedV2:z}=v,X=!(ne||B||z),{requestData:re,renderDesign:me}=(0,ut.lS)({api:b,popupHelper:j,experienceLoginModalHelper:V.m,initialData:U,designOptions:k,prepareProjectUpper:N,onBackButtonClick:this.handleBackButtonClick,onPlayButtonClick:this.handlePlayButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:q,password:F,showGuide:X});this.requestData=re,this.renderDesign=me}componentDidMount(){const v=performance.now(),{projectUpperCid:A,initialData:j,designOptions:k}=this.props;Promise.all([this.requestData(A),new Promise(b=>setTimeout(b,800))]).then(b=>{let[{projectAlike:U,projectMeta:N}]=b;this.setState({projectAlike:U,projectMeta:N},()=>{this.setState({isDataLoaded:!0})});const q=performance.now(),F=Math.ceil((q-v)/1e3);typeof je.U1=="function"&&(0,je.U1)("load_success_project",{load_time:F,project_name:j.projectName,project_cid:A,project_type:"\u539F\u578B V8",success:1,source:k.isExperience?"\u7D20\u6750\u5E7F\u573A-\u7F16\u8F91\u539F\u578B":window.opener?document.referrer&&gt(new URL(document.referrer))?"hover \u7F16\u8F91\u6309\u94AE":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u7F16\u8F91":"\u9879\u76EE\u7BA1\u7406\u9875-\u66F4\u591A-\u65B0\u6807\u7B7E\u9875\u7F16\u8F91"}),F>30&&(0,mt.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(b=>{console.error("[ExampleApp] requestData failed",b),typeof je.U1=="function"&&(0,je.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:b})})}render(){const{screenCid:v,designOptions:A,isHtmlZip:j}=this.props,{isLoading:k,isDataLoaded:b,isDesignCollapse:U,projectAlike:N,projectMeta:q}=this.state,{renderDesign:F}=this,{isWonderShare:ne}=A;return(0,oe.jsx)(g.XC.Provider,{value:this.keyboardManager,children:(0,oe.jsx)(I.Z,{children:(0,oe.jsxs)(_t,{className:"example-app",children:[b&&(0,oe.jsx)(M.Fragment,{children:(0,oe.jsx)(Pt.R,{screenCid:v,isCollapse:U,projectAlike:N,projectMeta:q,renderDesign:F,isHtmlZip:j})}),k&&(0,oe.jsx)(pt.Z,{className:"mb-loading",isNormal:ne})]})})})}}(0,he.Z)(S,"propTypes",{api:ce().object,initialData:ce().object,projectUpperCid:ce().string,screenCid:ce().string,designOptions:ce().object,prepareProjectUpper:ce().func,popupHelper:ce().object,sharing:ce().object,password:ce().string,isHtmlZip:ce().bool,isSquare:ce().bool,isEmbedV2:ce().bool});var x=e(92029);const Q="hzv3",_e="pid",we="pbj",Ae="psol",Te="psv2am",Se=()=>isBasicObject(window[TAG_HTML_ZIP_V3]),Oe=()=>(0,x.hK)(window[Q],"missing htmlZipV3 data"),Ue=async()=>(Oe(),window[Q][_e]),rt=async()=>{Oe();const{project_basic:L,screen_aligns:v,project_metas:A,screen_glues:j,screen_metas:k}=window[Q][we];return{projectBasic:L,screenAlignList:v,projectMetaList:A,screenGlueList:j,screenMetaList:k,projectScreenObjectList:window[Q][Ae]}},lt=async()=>(Oe(),{artboards:Object.values(window[Q][Te]).map(L=>{let{artboard:v}=L;return v})}),dt=async L=>(Oe(),window[Q][Te][L]),rr=async()=>{Oe();const{project_share:L}=window[TAG_HTML_ZIP_V3][TAG_PROJECT_BASIC_JSON];return{projectShare:L}},sr={requestPreviewInitialData:Ue,requestProjectFullDataByAccessToken:async L=>{let{projectEncryptedPassword:v}=L;const{projectMetaList:[A],screenGlueList:j,screenMetaList:k,projectScreenObjectList:b,projectBasic:U,screenAlignList:N}=await rt(),{password:q}=U;if(q&&v!==q)throw new Error("error password");return{projectMeta:A,screenGlueList:j,screenMetaList:k,projectScreenObjectList:b,projectBasic:U,screenAlignList:N}},requestSketchArtboardList:lt,requestSketchArtboardById:dt,requestProjectShare:async L=>({projectShare:{screen_visible_switch:!1,screen_visible_list:[]}}),fetchDataProjectBasic:rt};var or=e(61134),dr=e(46131),pr=e(70956),ur=e(47518);e.p="./mb-proto2/";const _r=document.getElementById("workspace"),mr=async()=>{var L;const v=d({isHTMLZip:!0});(0,a.tq)()&&$("body").addClass("mobile");let A=await(0,p.vn)();const{isOnPremises:j,isWonderShare:k,projectUpper:b,projectMeta:U}=A;A={...A,projectName:b.name,is_on_premises:j,is_wonder_share:k,project_basic:b,project_meta:U};const N=(0,ur.D)({project:b}),{locale:q,projectName:F,is_on_premises:ne,is_wonder_share:B}=A,z=await(0,dr.Q)(q);document.title=""+(0,pr.FQ)(b.name||b.title),!ne&&(0,je.wb)(),(0,or.N_)("isOnPremises",!!ne),(0,or.N_)("isWonderShare",!!B);const{projectAccessToken:X,projectEncryptedPassword:re,isPasswordRequired:me}=A,ee=(L=new URLSearchParams(location.search))==null?void 0:L.get("view_mode"),le=window.HZv5_PREVIEW_MODE||"";if(ee?ee==="device":le==="device")(0,u.v)(z,F),await It({initialData:A,previewOptions:v,api:sr,projectAccessToken:X,projectEncryptedPassword:re,isPasswordRequired:me,sharing:N,$root:document.getElementById("workspace")});else{const Ge={isDesign:!0,isExperience:!1,isLoggedExperience:!1,isOnPremises:!!ne,isWonderShare:!!B,guideType:void 0};i.render((0,oe.jsx)(S,{initialData:A,designOptions:Ge,api:sr,projectAccessToken:X,projectEncryptedPassword:re,isPasswordRequired:me,sharing:N,isHtmlZip:!0}),_r)}};document.addEventListener("DOMContentLoaded",async()=>{await mr()})},78467:(D,y,e)=>{"use strict";e.d(y,{HM:()=>n,mB:()=>s});var i=e(77276),p=e(45090),m=e(46198),M=e(42125),o=e(25797),P=e(35269);const E=document.getElementById("workspace"),t=(0,p.createGlobalStyle)([".btn-list{display:flex;flex-direction:row-reverse;justify-content:center;.primary{margin-left:20px;}.regular{margin-left:0 !important;}}"]),_=(a,d,l)=>{ReactDOM.render(_jsxs(_Fragment,{children:[_jsx(t,{}),_jsx(CrashedPage,{errorType:a.status||401,customTitle:d,customDes:l})]}),E)},s=async a=>{var d;let l,w,f,R,C;try{({user:C}=await(0,o.EE)("/api/web/v3/initial"))}catch(se){console.warn("[crashedPageWithUser]",se),l=()=>{m.render((0,P.jsx)(M.Z,{isOpen:!0,type:"signin",source:"proto-org-preview",onConfirm:()=>location.reload()}),document.getElementById("IBOT_MODAL_ROOT"))},w="\u767B\u5F55",R=()=>{m.render((0,P.jsx)(M.Z,{isOpen:!0,type:"signup",source:"proto-org-preview",onConfirm:()=>location.reload()}),document.getElementById("IBOT_MODAL_ROOT"))},f="\u6CE8\u518C",C={}}m.render((0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(t,{}),(0,P.jsx)(i.Z,{errorType:a.status||401,identity:1,account:(d=C)==null?void 0:d.email,primaryBtnText:w,primaryBtnClick:l,secondaryBtnText:f,secondaryBtnClick:R})]}),E)},n=(a,d)=>{let l="";a==="zh-CN"?l="/":a==="jp"?l="https://mockitt.wondershare.jp":l="https://mockitt.wondershare.com",location.replace(l)}},48290:(D,y,e)=>{"use strict";e.d(y,{C:()=>m,S:()=>M});var i=e(94189);const p=o=>("0"+parseInt(o).toString(16)).slice(-2),m=o=>!o||o==="rgba(0, 0, 0, 0)"||o==="transparent"?"transparent":(o=o.match(/^rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/),"#"+p(o[1])+p(o[2])+p(o[3])),M=o=>(0,i.LW)((0,i.LS)(o))},1e3:(D,y,e)=>{"use strict";e.d(y,{Mn:()=>s,U1:()=>M,be:()=>o,tv:()=>P,wb:()=>m});var i=e(66914);const p=function(){if(!window.dataLayer||!Array.isArray(window.dataLayer))return!1;const n=arguments.length<=0?void 0:arguments[0];let a=arguments.length<=1?void 0:arguments[1];Object.prototype.toString.call(a)!=="[object Object]"&&(console.warn("ga data's type is not object, and data is",a),a={});const d={};Object.entries(a).forEach(l=>{let[w,f]=l;d["mockitt_"+w]=f}),window.dataLayer.push({event:"saas_interaction",event_action:n,...d})},m=ENV.NO_TRACK?()=>{}:i.wb,M=ENV.NO_TRACK?()=>{}:function(){(0,i.U1)(...arguments)},o=ENV.NO_TRACK?()=>{}:n=>{let{paramName:a,defaultValue:d,valueType:l,callback:w}=n;return(0,i.be)({paramName:a,defaultValue:d,valueType:l,callback:w})},P=ENV.NO_TRACK?()=>{}:i.pj,E=ENV.IS_WONDER_SHARE?n=>{if(!window.gtag)return console.error("gtag is not a function");window.gtag("config","UA-4839360-64",{user_id:n,transport_type:"beacon"})}:()=>{},t={"https://mockittapp.wondershare.com/proto":"B3-V8\u539F\u578B\u5185\u5206\u4EAB"},_=()=>{const n=Object.keys(t).sort((a,d)=>d.length-a.length);return t[n.find(a=>window.location.href.indexOf(a)!==-1)]},s=async n=>{try{await fetch("https://mockittapp.wondershare.com/invite_track?entry="+_()+"&entry_term="+n)}catch(a){console.error(a)}}},70423:(D,y,e)=>{"use strict";e.d(y,{B0:()=>a,CL:()=>o,Dt:()=>_,ED:()=>m,IF:()=>d,Md:()=>l,Rv:()=>M,V5:()=>p,_j:()=>w,d:()=>i,i7:()=>P,li:()=>f,tq:()=>t,vU:()=>E});const i=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),p=()=>/(Macintosh)/i.test(navigator.userAgent),m=()=>/(Windows)/i.test(navigator.userAgent),M=()=>/(Lark)/i.test(navigator.userAgent),o=()=>/MicroMessenger/i.test(navigator.userAgent),P=()=>/Chrome/i.test(navigator.userAgent),E=()=>/Firefox/i.test(navigator.userAgent),t=()=>/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent),_=()=>/Android/i.test(navigator.userAgent),s=()=>/(iPad)/.test(navigator.userAgent),n=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),a=()=>!!(window.webkit&&window.webkit.messageHandlers),d=()=>navigator.standalone,l=()=>/\/uichina$/.test(location.pathname),w=()=>/\/forum$/.test(location.pathname),f=()=>/(MobileClient)/.test(navigator.userAgent)},39488:D=>{(function(y){var e,i={},p={16:!1,18:!1,17:!1,91:!1},m="all",M={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},o={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220,numpad_subtract:109,numpad_add:107,numpad_0:96,numpad_1:97,numpad_2:98},P=function(r){return o[r]||r.toUpperCase().charCodeAt(0)},E=[];for(e=1;e<20;e++)o["f"+e]=111+e;function t(r,u){for(var g=r.length;g--;)if(r[g]===u)return g;return-1}function _(r,u){if(r.length!=u.length)return!1;for(var g=0;g<r.length;g++)if(r[g]!==u[g])return!1;return!0}var s={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function n(r){for(e in p)p[e]=r[s[e]]}function a(r){var u,g,I,Y,Z,Me;if(u=r.keyCode,t(E,u)==-1&&E.push(u),(u==93||u==224)&&(u=91),u in p){p[u]=!0;for(I in M)M[I]==u&&(w[I]=!0);return}if(n(r),!!w.filter.call(this,r)&&u in i){for(Me=fe(),Y=0;Y<i[u].length;Y++)if(g=i[u][Y],g.scope==Me||g.scope=="all"){Z=g.mods.length>0;for(I in p)(!p[I]&&t(g.mods,+I)>-1||p[I]&&t(g.mods,+I)==-1)&&(Z=!1);(g.mods.length==0&&!p[16]&&!p[18]&&!p[17]&&!p[91]||Z)&&(w.track.call(this,g),g.method(r,g)===!1&&(r.preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation&&r.stopPropagation(),r.cancelBubble&&(r.cancelBubble=!0)))}}}function d(r){var u=r.keyCode,g,I=t(E,u);if(I>=0&&E.splice(I,1),(u==93||u==224)&&(u=91),u in p){p[u]=!1;for(g in M)M[g]==u&&(w[g]=!1)}}function l(){for(e in p)p[e]=!1;for(e in M)w[e]=!1}function w(r,u,g){var I,Y;I=W(r),g===void 0&&(g=u,u="all");for(var Z=0;Z<I.length;Z++)Y=[],r=I[Z].split("+"),r.length>1&&(Y=K(r),r=[r[r.length-1]]),r=r[0],r=P(r),r in i||(i[r]=[]),i[r].push({shortcut:I[Z],scope:u,method:g,key:I[Z],mods:Y})}function f(r,u){var g,I,Y=[],Z,Me,pe;for(g=W(r),Me=0;Me<g.length;Me++){if(I=g[Me].split("+"),I.length>1&&(Y=K(I)),r=I[I.length-1],r=P(r),u===void 0&&(u=fe()),!i[r])return;for(Z=0;Z<i[r].length;Z++)pe=i[r][Z],pe.scope===u&&_(pe.mods,Y)&&(i[r][Z]={})}}function R(r){return typeof r=="string"&&(r=P(r)),t(E,r)!=-1}function C(){return E.slice(0)}function se(r){var u=(r.target||r.srcElement).tagName;return!(u=="INPUT"||u=="SELECT"||u=="TEXTAREA")}function ae(r){}for(e in M)w[e]=!1;function de(r){m=r||"all"}function fe(){return m||"all"}function Ee(r){var u,g,I;for(u in i)for(g=i[u],I=0;I<g.length;)g[I].scope===r?g.splice(I,1):I++}function W(r){var u;return r=r.replace(/\s/g,""),u=r.split(","),u[u.length-1]==""&&(u[u.length-2]+=","),u}function K(r){for(var u=r.slice(0,r.length-1),g=0;g<u.length;g++)u[g]=M[u[g]];return u}function H(r,u,g){r.addEventListener?r.addEventListener(u,g,!1):r.attachEvent&&r.attachEvent("on"+u,function(){g(window.event)})}H(document,"keydown",function(r){a(r)}),H(document,"keyup",d),H(window,"focus",l);var O=y.key;function T(){var r=y.key;return y.key=O,r}y.key=w,y.key.setScope=de,y.key.getScope=fe,y.key.deleteScope=Ee,y.key.filter=se,y.key.isPressed=R,y.key.getPressedKeyCodes=C,y.key.noConflict=T,y.key.unbind=f,y.key.track=ae,D.exports=w})(window)},44766:(D,y,e)=>{"use strict";e.d(y,{Fs:()=>n,L9:()=>t,lA:()=>a,lo:()=>se});var i=e(27444),p=e(777),m=e(67631),M=e(26844),o=e(14634),P=e(44386);const E=async W=>{let{projectMetaCid:K,projectMetaType:H,screenMetaCidList:O,projectBasicEncryptedPassword:T,accessToken:r=""}=W;if(O.length===0)return[];const u="/project-buffer/"+(0,M.bL)(H)+"/all/"+K+"?password="+T+"&access_token="+r,g=await(0,P.n3)(u,{localKeyList:O});return await(0,m.Of)({projectBufferData:g,parseConcatGzipDataToObjectList:o._D,projectMetaType:H})},t=async W=>{let{projectMetaList:K,screenMetaList:H,projectBasicEncryptedPassword:O=""}=W;const T=[];for(const r of K){const u=(0,i.eO)(H.filter(g=>g.project_meta_cid===r.cid).map(g=>g.cid),1024);for(const g of u)T.push(...await E({projectMetaCid:r.cid,projectMetaType:r.type,screenMetaCidList:g,projectBasicEncryptedPassword:O}))}return T},_=async W=>{let{projectMetaList:K,screenMetaList:H,projectBasicEncryptedPassword:O="",accessToken:T=""}=W;const r=[];for(const u of K){const g=H.filter(Y=>Y.project_meta_cid===u.cid).map(Y=>Y.cid);g.length>2048&&console.warn("[fdPSOL] big proj: "+g.length);const I=(0,i.eO)(g,1024);for(const Y of I)r.push(...await E({projectMetaCid:u.cid,projectMetaType:u.type,screenMetaCidList:Y,projectBasicEncryptedPassword:O,accessToken:T}))}return r},s=async W=>{let{userLocale:K}=W;const{user_combo_groups:H,screen_aligns:O,project_metas:T,screen_glues:r,screen_metas:u}=await fetchGetJSON("/api/library/v3/project_upper/user_combo_groups");return console.log("[fdUSG] pm#"+T.length+" sg#"+r.length+" sm#"+u.length+" | ucg#"+H.length+" sa#"+O.length),{userComboGroupList:H,screenAlignList:O,projectMetaList:T,screenGlueList:r,screenMetaList:u,projectScreenObjectList:await _({projectMetaList:T,screenMetaList:u})}},n=async W=>{let{projectBasicCid:K,userLocale:H}=W;const{project_basic:O,screen_aligns:T,project_metas:r,screen_glues:u,screen_metas:g}=await(0,P.EE)("/api/upper/web_v1/basics/"+K);return console.log("[fdPB] pm#"+r.length+" sg#"+u.length+" sm#"+g.length+" | sa#"+T.length),{projectBasic:O,screenAlignList:T,projectMetaList:r,screenGlueList:u,screenMetaList:g,projectScreenObjectList:await _({projectMetaList:r,screenMetaList:g})}},a=async W=>{let{projectBasicAccessToken:K,projectBasicEncryptedPassword:H="",userLocale:O,projectVersion:T}=W;const{project_basic:r,screen_aligns:u,project_metas:g,screen_glues:I,screen_metas:Y}=await(0,P.EE)("/api/upper/web_v1/basics/"+K+"?password="+H+(T?"&version="+T:"")),Z=I.find(pe=>pe.type===M._H.PROJECT_TRASHCAN),Me=Z?Y.filter(pe=>pe.screen_glue_cid!==Z.cid):Y;return console.log("[fdPB+] pm#"+g.length+" sg#"+I.length+" sm#"+Y.length+"/"+Me.length+" | sa#"+u.length),{projectBasic:r,screenAlignList:u,projectMetaList:g,screenGlueList:I,screenMetaList:Me,projectScreenObjectList:await _({projectMetaList:g,screenMetaList:Me,projectBasicEncryptedPassword:H,accessToken:K})}},d=async W=>{let{projectBasicAccessToken:K,projectBasicEncryptedPassword:H="",userLocale:O}=W;const{project_basic:T,screen_aligns:r,project_metas:u,screen_glues:g,screen_metas:I}=await fetchGetJSON("/api/upper/web_v1/basics/"+K+"?password="+H);return console.log("[fdPBbAT] pm#"+u.length+" sg#"+g.length+" sm#"+I.length+" | sa#"+r.length),{projectBasic:T,screenAlignList:r,projectMetaList:u,screenGlueList:g,screenMetaList:I,projectScreenObjectList:await _({projectMetaList:u,screenMetaList:I,projectBasicEncryptedPassword:H,accessToken:K})}},l=async W=>{let{projectUpperCid:K,isFromIframe:H=!1}=W;const{market_template:O,screen_aligns:T,project_metas:r,screen_glues:u,screen_metas:g}=await fetchGetJSON("/api/community/v1/market_template/"+K+(H?"?is_from_iframe=true":""));return console.log("[fdMT] pm#"+r.length+" sg#"+u.length+" sm#"+g.length+" | sa#"+T.length),{projectUpper:O,screenAlignList:T,projectMetaList:r,screenGlueList:u,screenMetaList:g,projectScreenObjectList:await _({projectMetaList:r,screenMetaList:g})}},w=async W=>{let{projectUpperCid:K,isFromIframe:H=1}=W;const{data:O,market_template:T,project_metas:r}=await fetchGetJSON("/api/community/v1/market_template/"+K+(H?"?is_from_iframe=true":""));return{screenMetaList:O,projectUpper:T,projectMetaList:r}},f=async W=>{let{projectUpperCid:K}=W;const{reviewable_project:H,screen_aligns:O,project_metas:T,screen_glues:r,screen_metas:u}=await fetchGetJSON("/api/community/v1/reviewable_project/"+K);return console.log("[fdRP] pm#"+T.length+" sg#"+r.length+" sm#"+u.length+" | sa#"+O.length),{projectUpper:H,screenAlignList:O,projectMetaList:T,screenGlueList:r,screenMetaList:u,projectScreenObjectList:await _({projectMetaList:T,screenMetaList:u})}},R=async W=>{let{projectUpperCid:K}=W;const{reviewable_project:H,screen_aligns:O,project_metas:T}=await fetchGetJSON("/api/community/v1/reviewable_project/"+K);return{projectUpper:H,projectMetaList:T,screenAlignList:O}},C=async W=>{let{projectUpperCid:K}=W;const{product:H,screen_aligns:O,project_metas:T,screen_glues:r,screen_metas:u}=await fetchGetJSON("/api/upper/web_v1/product/"+K);return console.log("[fdCP] pm#"+T.length+" sg#"+r.length+" sm#"+u.length+" | sa#"+O.length),{projectUpper:H,screenAlignList:O,projectMetaList:T,screenGlueList:r,screenMetaList:u,projectScreenObjectList:await _({projectMetaList:T,screenMetaList:u})}},se=async(W,K)=>{let{teamCid:H,userLocale:O}=W;const{name:T,type:r,attr:u={},device:g,model:I,width:Y,height:Z,subProject:Me,zboardTag:pe,visibility:Ce}=K,ve=p.eM,{userId:oe,upperCid:Be,zboardTabs:Fe,projectMetaCid:Ie}=await(0,P.Gf)("/project-buffer/"+r+"/check-init/project-upper?upperType="+ve,{presetOption:{locale:O,name:T,type:r,device:g,model:I,width:Y,height:Z},railsExtra:{team_cid:H,visibility:Ce,name:T,type:r,attr:u,device:g,model:I,width:Y,height:Z,subProject:Me,zboardTag:pe}});return{userId:oe,upperCid:Be,upperType:ve,zboardTabs:Fe,projectMetaCid:Ie}},ae=async W=>{let{projectBasicCid:K,projectBasicType:H,teamCid:O}=W;const T=UPPER_META_PROJECT_BASIC,{userId:r,upperCid:u,projectMetaCid:g}=await fetchPostJSON("/project-buffer/"+H+"/check-duplicate/project-upper?upperAction=duplicate-project-basic&upperCid="+K,{railsExtra:{team_cid:O}});return{userId:r,upperCid:u,upperType:T,projectMetaCid:g}},de=async W=>{let{upperCid:K,projectMetaCid:H,projectMetaType:O,screenGlueCid:T,screenMetaCidList:r,screenGlueCidList:u=[],nextUpperCid:g,nextProjectMetaCid:I,nextScreenGlueCid:Y}=W;const{userId:Z}=await fetchPostJSON("/project-buffer/"+O+"/check-transfer/screen-meta?upperCid="+K,{projectMetaCid:H,screenGlueCid:T,screenMetaCidList:r,screenGlueCidList:u,nextUpperCid:g,nextProjectMetaCid:I,nextScreenGlueCid:Y});return{userId:Z,upperCid:K,nextUpperCid:g}},fe=async W=>{let{encryptedPassword:K,accessToken:H}=W;const{urlHtmlZip:O}=await fetchPostJSON("/nodekiq/build-html-zip",{encryptedPassword:K,accessToken:H});return{urlHtmlZip:O}},Ee=async W=>{let{encryptedPassword:K,accessToken:H}=W;const{urlApk:O}=await fetchPostJSON("/nodekiq/build-apk",{encryptedPassword:K,accessToken:H});return{urlApk:O}}},64239:(D,y,e)=>{"use strict";e.d(y,{T7:()=>T});var i=e(26844),p=e(30198),m=e(385),M=e(6482),o=e(23578),P=e(91919),E=e(41202),t=e(44079),_=e(41223),s=e(29574),n=e(31304),a=e(48203),d=e(84101),l=e(21932),w=e(57272),f=e(71043),R=e(10267),C=e(57154),se=e(79712),ae=e(58846),de=e(86763),fe=e(83238),Ee=e(29078),W=e(9601),K=e(96228),H=e(61190),O=e(14736);const T=Z=>{switch(Z){case i.Ye.DESIGN_DRAFT:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:E.uv,filterEntryScreenMeta:t.uv,filterEntryScreenState:_.uv,filterEntryItem:s.uv};case i.Ye.PROTOTYPE:case i.Wp:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:m.uv,filterEntryScreenMeta:M.uv,filterEntryScreenState:o.uv,filterEntryItem:P.uv};case i.Ye.FLOW_CHART:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:f.uv,filterEntryScreenMeta:R.uv,filterEntryScreenState:C.uv,filterEntryItem:se.uv};case i.Ye.MIND_MAP:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:ae.uv,filterEntryScreenMeta:de.uv,filterEntryScreenState:fe.uv,filterEntryItem:Ee.uv};case i.Ye.ABOARD:return{filterEntryProjectMeta:p.uv,filterEntryScreenGlue:W.uv,filterEntryScreenMeta:K.uv,filterEntryScreenState:H.uv,filterEntryItem:O.u}}throw new Error("unexpected projectMetaType: "+Z)},r=Z=>{switch(Z){case PROJECT_META_TYPE.DESIGN_DRAFT:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueDesignDraft,collectCidScreenMeta:collectCidScreenMetaDesignDraft,collectCidScreenState:collectCidScreenStateDesignDraft,collectCidItem:collectCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGluePrototype,collectCidScreenMeta:collectCidScreenMetaPrototype,collectCidScreenState:collectCidScreenStatePrototype,collectCidItem:collectCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueFlowChart,collectCidScreenMeta:collectCidScreenMetaFlowChart,collectCidScreenState:collectCidScreenStateFlowChart,collectCidItem:collectCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueMindMap,collectCidScreenMeta:collectCidScreenMetaMindMap,collectCidScreenState:collectCidScreenStateMindMap,collectCidItem:collectCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueAboard,collectCidScreenMeta:collectCidScreenMetaAboard,collectCidScreenState:collectCidScreenStateAboard,collectCidItem:collectCidItemAboard}}throw new Error("unexpected projectMetaType: "+Z)},u=Z=>{switch(Z){case PROJECT_META_TYPE.DESIGN_DRAFT:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueDesignDraft,remapCidScreenMeta:remapCidScreenMetaDesignDraft,remapCidScreenState:remapCidScreenStateDesignDraft,remapCidItem:remapCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGluePrototype,remapCidScreenMeta:remapCidScreenMetaPrototype,remapCidScreenState:remapCidScreenStatePrototype,remapCidItem:remapCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueFlowChart,remapCidScreenMeta:remapCidScreenMetaFlowChart,remapCidScreenState:remapCidScreenStateFlowChart,remapCidItem:remapCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueMindMap,remapCidScreenMeta:remapCidScreenMetaMindMap,remapCidScreenState:remapCidScreenStateMindMap,remapCidItem:remapCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueAboard,remapCidScreenMeta:remapCidScreenMetaAboard,remapCidScreenState:remapCidScreenStateAboard,remapCidItem:remapCidItemAboard}}throw new Error("unexpected projectMetaType: "+Z)},g=Z=>{switch(Z){case PROJECT_META_TYPE.DESIGN_DRAFT:case PROJECT_META_TYPE.MIND_MAP:case PROJECT_META_TYPE.FLOW_CHART:case PROJECT_META_TYPE.ABOARD:return{};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{MAX_Z:MAX_Z_PROTOTYPE,STICKY_Z:STICKY_Z_PROTOTYPE}}throw new Error("unexpected projectMetaType: "+Z)},I=Z=>{switch(Z){case PROJECT_META_TYPE.DESIGN_DRAFT:return createPresetProjectMetaDataDesignDraft;case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return createPresetProjectMetaDataProtoType;case PROJECT_META_TYPE.FLOW_CHART:return createPresetProjectMetaDataFlowChart;case PROJECT_META_TYPE.MIND_MAP:return createPresetProjectMetaDataMindMap;case PROJECT_META_TYPE.ABOARD:return createPresetProjectMetaDataAboard}},Y=Z=>{switch(Z){case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return collectAssetUrlPrototype;case PROJECT_META_TYPE.FLOW_CHART:return collectAssetUrlFlowChart;case PROJECT_META_TYPE.MIND_MAP:return collectAssetUrlMindMap;case PROJECT_META_TYPE.ABOARD:return collectAssetUrlAboard;default:throw new Error("unexpected projectMetaType: "+Z)}}},95890:(D,y,e)=>{"use strict";e.d(y,{Sm:()=>n,WX:()=>d,XC:()=>_,e7:()=>s,k:()=>a});var i=e(7485),p=e(26250),m=e.n(p),M=e(77359),o=e.n(M);const P=()=>/(Macintosh)/i.test(navigator.userAgent),E=new Map;function t(l){if(!l)return;let w=E.get(l);if(w!==void 0)return w;const f=l.split("+");if(P()){const R=C=>C==="mod"?"\u2318":C==="alt"?"\u2325":C==="shift"?"\u21E7":C==="ctrl"?"\u2303":C==="backspace"?"\u232B":C==="del"?"Delete":C.charAt(0).toUpperCase()+C.slice(1);w=f.map(R).join("")}else{const R=C=>C==="mod"?"Ctrl":C.toLowerCase()==="alt"?"Alt":C.toLowerCase()==="shift"?"Shift":C.toLowerCase()==="ctrl"?"Ctrl":C==="backspace"?"Backspace":C==="del"?"Delete":C.toLowerCase()==="return"?"Enter":C.charAt(0).toUpperCase()+C.slice(1);w=f.map(R).join("+")}return E.set(l,w),w}const _=(0,i.createContext)(void 0);var s;(function(l){l[l.Normal=0]="Normal",l[l.Mode=100]="Mode",l[l.FloatingPanel=200]="FloatingPanel",l[l.Input=201]="Input",l[l.TextEditor=300]="TextEditor",l[l.BlockingPanel=400]="BlockingPanel"})(s||(s={}));class n{constructor(){this.keys=new Map,this.globalKeys=new Map,this.sheetsBound=new Set}createHandler(w,f){return f===void 0&&(f=!1),R=>this.invoke(w,f)}invoke(w,f){f===void 0&&(f=!1);const R=f?this.globalKeys.get(w):this.keys.get(w);return R&&R.length>0?(R[0].keys[w](),!1):!0}bind(w){if(w.isGlobal)for(const[f]of Object.entries(w.keys)){const R=this.globalKeys.get(f);if(R)R.push(w),R.sort((C,se)=>se.priority-C.priority);else{const C=this.createHandler(f,!0);m().bindGlobal(f,C),this.globalKeys.set(f,[w])}}else for(const[f]of Object.entries(w.keys)){const R=this.keys.get(f);if(R)R.push(w),R.sort((C,se)=>se.priority-C.priority);else{const C=this.createHandler(f);m().bind(f,C),this.keys.set(f,[w])}}this.sheetsBound.add(w)}unbind(w){w.isGlobal?this.globalKeys.forEach((f,R)=>{o().remove(f,C=>C===w)}):this.keys.forEach((f,R)=>{o().remove(f,C=>C===w)}),this.sheetsBound.delete(w)}pause(){m().pause()}unpause(){m().unpause()}}function a(l){const w=(0,i.useContext)(_);return(0,i.useEffect)(()=>{w.pause();const f=R=>{R.key==="Escape"&&!R.shiftKey&&!R.metaKey&&!R.ctrlKey&&!R.altKey&&(R.preventDefault(),l.dismiss())};return document.addEventListener("keydown",f),()=>{w.unpause(),document.removeEventListener("keydown",f)}}),null}const d=(0,i.memo)(l=>{const w=(0,i.useContext)(_);return(0,i.useEffect)(()=>(w.bind(l.sheet),()=>{w.unbind(l.sheet)})),null})},75985:(D,y,e)=>{(function(){var i=e(55983),p=e(97279).utf8,m=e(85884),M=e(97279).bin,o=function(P,E){P.constructor==String?E&&E.encoding==="binary"?P=M.stringToBytes(P):P=p.stringToBytes(P):m(P)?P=Array.prototype.slice.call(P,0):!Array.isArray(P)&&P.constructor!==Uint8Array&&(P=P.toString());for(var t=i.bytesToWords(P),_=P.length*8,s=1732584193,n=-271733879,a=-1732584194,d=271733878,l=0;l<t.length;l++)t[l]=(t[l]<<8|t[l]>>>24)&16711935|(t[l]<<24|t[l]>>>8)&4278255360;t[_>>>5]|=128<<_%32,t[(_+64>>>9<<4)+14]=_;for(var w=o._ff,f=o._gg,R=o._hh,C=o._ii,l=0;l<t.length;l+=16){var se=s,ae=n,de=a,fe=d;s=w(s,n,a,d,t[l+0],7,-680876936),d=w(d,s,n,a,t[l+1],12,-389564586),a=w(a,d,s,n,t[l+2],17,606105819),n=w(n,a,d,s,t[l+3],22,-1044525330),s=w(s,n,a,d,t[l+4],7,-176418897),d=w(d,s,n,a,t[l+5],12,1200080426),a=w(a,d,s,n,t[l+6],17,-1473231341),n=w(n,a,d,s,t[l+7],22,-45705983),s=w(s,n,a,d,t[l+8],7,1770035416),d=w(d,s,n,a,t[l+9],12,-1958414417),a=w(a,d,s,n,t[l+10],17,-42063),n=w(n,a,d,s,t[l+11],22,-1990404162),s=w(s,n,a,d,t[l+12],7,1804603682),d=w(d,s,n,a,t[l+13],12,-40341101),a=w(a,d,s,n,t[l+14],17,-1502002290),n=w(n,a,d,s,t[l+15],22,1236535329),s=f(s,n,a,d,t[l+1],5,-165796510),d=f(d,s,n,a,t[l+6],9,-1069501632),a=f(a,d,s,n,t[l+11],14,643717713),n=f(n,a,d,s,t[l+0],20,-373897302),s=f(s,n,a,d,t[l+5],5,-701558691),d=f(d,s,n,a,t[l+10],9,38016083),a=f(a,d,s,n,t[l+15],14,-660478335),n=f(n,a,d,s,t[l+4],20,-405537848),s=f(s,n,a,d,t[l+9],5,568446438),d=f(d,s,n,a,t[l+14],9,-1019803690),a=f(a,d,s,n,t[l+3],14,-187363961),n=f(n,a,d,s,t[l+8],20,1163531501),s=f(s,n,a,d,t[l+13],5,-1444681467),d=f(d,s,n,a,t[l+2],9,-51403784),a=f(a,d,s,n,t[l+7],14,1735328473),n=f(n,a,d,s,t[l+12],20,-1926607734),s=R(s,n,a,d,t[l+5],4,-378558),d=R(d,s,n,a,t[l+8],11,-2022574463),a=R(a,d,s,n,t[l+11],16,1839030562),n=R(n,a,d,s,t[l+14],23,-35309556),s=R(s,n,a,d,t[l+1],4,-1530992060),d=R(d,s,n,a,t[l+4],11,1272893353),a=R(a,d,s,n,t[l+7],16,-155497632),n=R(n,a,d,s,t[l+10],23,-1094730640),s=R(s,n,a,d,t[l+13],4,681279174),d=R(d,s,n,a,t[l+0],11,-358537222),a=R(a,d,s,n,t[l+3],16,-722521979),n=R(n,a,d,s,t[l+6],23,76029189),s=R(s,n,a,d,t[l+9],4,-640364487),d=R(d,s,n,a,t[l+12],11,-421815835),a=R(a,d,s,n,t[l+15],16,530742520),n=R(n,a,d,s,t[l+2],23,-995338651),s=C(s,n,a,d,t[l+0],6,-198630844),d=C(d,s,n,a,t[l+7],10,1126891415),a=C(a,d,s,n,t[l+14],15,-1416354905),n=C(n,a,d,s,t[l+5],21,-57434055),s=C(s,n,a,d,t[l+12],6,1700485571),d=C(d,s,n,a,t[l+3],10,-1894986606),a=C(a,d,s,n,t[l+10],15,-1051523),n=C(n,a,d,s,t[l+1],21,-2054922799),s=C(s,n,a,d,t[l+8],6,1873313359),d=C(d,s,n,a,t[l+15],10,-30611744),a=C(a,d,s,n,t[l+6],15,-1560198380),n=C(n,a,d,s,t[l+13],21,1309151649),s=C(s,n,a,d,t[l+4],6,-145523070),d=C(d,s,n,a,t[l+11],10,-1120210379),a=C(a,d,s,n,t[l+2],15,718787259),n=C(n,a,d,s,t[l+9],21,-343485551),s=s+se>>>0,n=n+ae>>>0,a=a+de>>>0,d=d+fe>>>0}return i.endian([s,n,a,d])};o._ff=function(P,E,t,_,s,n,a){var d=P+(E&t|~E&_)+(s>>>0)+a;return(d<<n|d>>>32-n)+E},o._gg=function(P,E,t,_,s,n,a){var d=P+(E&_|t&~_)+(s>>>0)+a;return(d<<n|d>>>32-n)+E},o._hh=function(P,E,t,_,s,n,a){var d=P+(E^t^_)+(s>>>0)+a;return(d<<n|d>>>32-n)+E},o._ii=function(P,E,t,_,s,n,a){var d=P+(t^(E|~_))+(s>>>0)+a;return(d<<n|d>>>32-n)+E},o._blocksize=16,o._digestsize=16,D.exports=function(P,E){if(P==null)throw new Error("Illegal argument "+P);var t=i.wordsToBytes(o(P,E));return E&&E.asBytes?t:E&&E.asString?M.bytesToString(t):i.bytesToHex(t)}})()},46198:(D,y,e)=>{"use strict";function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(p){console.error(p)}}i(),D.exports=e(23801)},71617:(D,y)=>{"use strict";/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Symbol.for("react.element"),i=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),P=Symbol.for("react.context"),E=Symbol.for("react.server_context"),t=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),s=Symbol.for("react.suspense_list"),n=Symbol.for("react.memo"),a=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),l;l=Symbol.for("react.module.reference");function w(f){if(typeof f=="object"&&f!==null){var R=f.$$typeof;switch(R){case e:switch(f=f.type,f){case p:case M:case m:case _:case s:return f;default:switch(f=f&&f.$$typeof,f){case E:case P:case t:case a:case n:case o:return f;default:return R}}case i:return R}}}y.ContextConsumer=P,y.ContextProvider=o,y.Element=e,y.ForwardRef=t,y.Fragment=p,y.Lazy=a,y.Memo=n,y.Portal=i,y.Profiler=M,y.StrictMode=m,y.Suspense=_,y.SuspenseList=s,y.isAsyncMode=function(){return!1},y.isConcurrentMode=function(){return!1},y.isContextConsumer=function(f){return w(f)===P},y.isContextProvider=function(f){return w(f)===o},y.isElement=function(f){return typeof f=="object"&&f!==null&&f.$$typeof===e},y.isForwardRef=function(f){return w(f)===t},y.isFragment=function(f){return w(f)===p},y.isLazy=function(f){return w(f)===a},y.isMemo=function(f){return w(f)===n},y.isPortal=function(f){return w(f)===i},y.isProfiler=function(f){return w(f)===M},y.isStrictMode=function(f){return w(f)===m},y.isSuspense=function(f){return w(f)===_},y.isSuspenseList=function(f){return w(f)===s},y.isValidElementType=function(f){return typeof f=="string"||typeof f=="function"||f===p||f===M||f===m||f===_||f===s||f===d||typeof f=="object"&&f!==null&&(f.$$typeof===a||f.$$typeof===n||f.$$typeof===o||f.$$typeof===P||f.$$typeof===t||f.$$typeof===l||f.getModuleId!==void 0)},y.typeOf=w},89870:(D,y,e)=>{"use strict";e.d(y,{$j:()=>i.$j,I0:()=>i.I0,v9:()=>i.v9,wU:()=>i.wU,zt:()=>i.zt});var i=e(79973),p=e(86312),m=e(26521);(0,m.F)(p.m)},7485:(D,y,e)=>{"use strict";D.exports=e(67887)},84515:D=>{"use strict";D.exports=canvg},29750:D=>{"use strict";D.exports=dompurify},75177:D=>{"use strict";D.exports=html2canvas}},Zt={};function J(D){var y=Zt[D];if(y!==void 0)return y.exports;var e=Zt[D]={id:D,loaded:!1,exports:{}};return Vt[D].call(e.exports,e,e.exports,J),e.loaded=!0,e.exports}J.m=Vt,J.amdO={},(()=>{var D=[];J.O=(y,e,i,p)=>{if(e){p=p||0;for(var m=D.length;m>0&&D[m-1][2]>p;m--)D[m]=D[m-1];D[m]=[e,i,p];return}for(var M=1/0,m=0;m<D.length;m++){for(var[e,i,p]=D[m],o=!0,P=0;P<e.length;P++)(p&!1||M>=p)&&Object.keys(J.O).every(a=>J.O[a](e[P]))?e.splice(P--,1):(o=!1,p<M&&(M=p));if(o){D.splice(m--,1);var E=i();E!==void 0&&(y=E)}}return y}})(),J.n=D=>{var y=D&&D.__esModule?()=>D.default:()=>D;return J.d(y,{a:y}),y},(()=>{var D=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,y;J.t=function(e,i){if(i&1&&(e=this(e)),i&8||typeof e=="object"&&e&&(i&4&&e.__esModule||i&16&&typeof e.then=="function"))return e;var p=Object.create(null);J.r(p);var m={};y=y||[null,D({}),D([]),D(D)];for(var M=i&2&&e;typeof M=="object"&&!~y.indexOf(M);M=D(M))Object.getOwnPropertyNames(M).forEach(o=>m[o]=()=>e[o]);return m.default=()=>e,J.d(p,m),p}})(),J.d=(D,y)=>{for(var e in y)J.o(y,e)&&!J.o(D,e)&&Object.defineProperty(D,e,{enumerable:!0,get:y[e]})},J.f={},J.e=D=>Promise.all(Object.keys(J.f).reduce((y,e)=>(J.f[e](D,y),y),[])),J.u=D=>""+D+"-"+{164:"48df373806d1878c2de6",848:"7c16c8a7e092951d7487",856:"10b02aaaa2bf398fa23e"}[D]+".js",J.miniCssF=D=>{},J.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(D){if(typeof window=="object")return window}}(),J.hmd=D=>(D=Object.create(D),D.children||(D.children=[]),Object.defineProperty(D,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+D.id)}}),D),J.o=(D,y)=>Object.prototype.hasOwnProperty.call(D,y),(()=>{var D={},y="@mockingbot/mb-proto:";J.l=(e,i,p,m)=>{if(D[e]){D[e].push(i);return}var M,o;if(p!==void 0)for(var P=document.getElementsByTagName("script"),E=0;E<P.length;E++){var t=P[E];if(t.getAttribute("src")==e||t.getAttribute("data-webpack")==y+p){M=t;break}}M||(o=!0,M=document.createElement("script"),M.charset="utf-8",M.timeout=120,J.nc&&M.setAttribute("nonce",J.nc),M.setAttribute("data-webpack",y+p),M.src=e),D[e]=[i];var _=(n,a)=>{M.onerror=M.onload=null,clearTimeout(s);var d=D[e];if(delete D[e],M.parentNode&&M.parentNode.removeChild(M),d&&d.forEach(l=>l(a)),n)return n(a)},s=setTimeout(_.bind(null,void 0,{type:"timeout",target:M}),12e4);M.onerror=_.bind(null,M.onerror),M.onload=_.bind(null,M.onload),o&&document.head.appendChild(M)}})(),J.r=D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},J.nmd=D=>(D.paths=[],D.children||(D.children=[]),D),J.j=96,J.p="/mb-proto2/",(()=>{var D={96:0};J.f.j=(i,p)=>{var m=J.o(D,i)?D[i]:void 0;if(m!==0)if(m)p.push(m[2]);else{var M=new Promise((t,_)=>m=D[i]=[t,_]);p.push(m[2]=M);var o=J.p+J.u(i),P=new Error,E=t=>{if(J.o(D,i)&&(m=D[i],m!==0&&(D[i]=void 0),m)){var _=t&&(t.type==="load"?"missing":t.type),s=t&&t.target&&t.target.src;P.message="Loading chunk "+i+` failed.
(`+_+": "+s+")",P.name="ChunkLoadError",P.type=_,P.request=s,m[1](P)}};J.l(o,E,"chunk-"+i,i)}},J.O.j=i=>D[i]===0;var y=(i,p)=>{var[m,M,o]=p,P,E,t=0;if(m.some(s=>D[s]!==0)){for(P in M)J.o(M,P)&&(J.m[P]=M[P]);if(o)var _=o(J)}for(i&&i(p);t<m.length;t++)E=m[t],J.o(D,E)&&D[E]&&D[E][0](),D[E]=0;return J.O(_)},e=self.webpackChunk_mockingbot_mb_proto=self.webpackChunk_mockingbot_mb_proto||[];e.forEach(y.bind(null,0)),e.push=y.bind(null,e.push.bind(e))})(),J.nc=void 0,J.O(void 0,[736],()=>J(76557)),J.O(void 0,[736],()=>J(57539)),J.O(void 0,[736],()=>J(99287));var zt=J.O(void 0,[736],()=>J(24347));zt=J.O(zt)})();

//# sourceMappingURL=preview-html-zip-6d1b9dc68e438d8d197f.js.map